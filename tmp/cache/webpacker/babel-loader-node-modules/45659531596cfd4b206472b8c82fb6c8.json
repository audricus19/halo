{"ast":null,"code":"var _jsxFileName = \"/Volumes/Work/work/dev/project/projects/halo/app/javascript/src/marketplace/components/ProposalsDashboard/ProposalList.jsx\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { intersection } from 'lodash';\nimport { css, StyleSheet } from 'aphrodite';\nimport _ from 'lodash';\nimport { COLORS } from '../../../../constants';\nimport ProposalRow from './ProposalRow';\nimport ProposalDetails from './ProposalDetails';\nimport ContactModal from './ContactModal';\nimport ShareModal from './ShareModal';\nvar styles = StyleSheet.create({\n  ProposalList_noResultsText: {\n    textAlign: 'center',\n    fontSize: '14px',\n    marginTop: '30px'\n  },\n  ProposalList_resultRow: {\n    textDecoration: 'none'\n  },\n  ProposalList_container: {\n    display: 'flex'\n  },\n  ProposalList_listView: {\n    width: '30%',\n    paddingTop: '55px'\n  },\n  ProposalList_detailsView: {\n    width: '60%',\n    paddingTop: '55px'\n  }\n});\n\nvar ProposalList =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(ProposalList, _PureComponent);\n\n  function ProposalList(props) {\n    var _this;\n\n    _classCallCheck(this, ProposalList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProposalList).call(this, props));\n\n    _this.contactProposer = function (proposal, status) {\n      _this.setState({\n        contactProposal: proposal,\n        contactStatus: status,\n        contactModalOpen: true\n      });\n    };\n\n    _this.closeContactModal = function () {\n      _this.setState({\n        contactModalOpen: false\n      });\n    };\n\n    _this.shareProposal = function (proposal) {\n      _this.setState({\n        sharedProposal: proposal,\n        shareModalOpen: true\n      });\n    };\n\n    _this.onClickProposal = function (proposal) {\n      _this.setState({\n        detailsProposal: proposal\n      });\n    };\n\n    _this.closeShareModal = function () {\n      _this.setState({\n        shareModalOpen: false\n      });\n    };\n\n    _this.state = {\n      contactProposal: undefined,\n      shareProposal: undefined,\n      detailsProposal: (props.proposals || [])[0]\n    };\n    return _this;\n  }\n\n  _createClass(ProposalList, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!prevState.detailsProposal && this.props.proposals.length > 0 || prevState.detailsProposal && !this.props.proposals.map(function (p) {\n        return p.id;\n      }).includes(prevState.detailsProposal.id)) {\n        this.setState({\n          detailsProposal: this.props.proposals[0]\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          proposals = _this$props.proposals,\n          fetchProposals = _this$props.fetchProposals,\n          publications = _this$props.publications,\n          fundings = _this$props.fundings,\n          patents = _this$props.patents,\n          fetchPublications = _this$props.fetchPublications,\n          fetchFundings = _this$props.fetchFundings,\n          fetchPatents = _this$props.fetchPatents;\n      var _this$state = this.state,\n          contactProposal = _this$state.contactProposal,\n          contactModalOpen = _this$state.contactModalOpen,\n          contactStatus = _this$state.contactStatus,\n          sharedProposal = _this$state.sharedProposal,\n          shareModalOpen = _this$state.shareModalOpen,\n          detailsProposal = _this$state.detailsProposal;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(ContactModal, {\n        proposal: contactProposal,\n        open: contactModalOpen,\n        status: contactStatus,\n        closeContactModal: this.closeContactModal,\n        fetchProposals: fetchProposals,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(ShareModal, {\n        proposal: sharedProposal,\n        open: shareModalOpen,\n        closeShareModal: this.closeShareModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), proposals.length === 0 ? React.createElement(\"div\", {\n        className: css(styles.ProposalList_noResultsText),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"No proposals of this type exist for this RFP\") : React.createElement(\"div\", {\n        className: css(styles.ProposalList_container),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: css(styles.ProposalList_listView),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, _.orderBy(proposals, ['id'], ['asc']).map(function (proposal, idx) {\n        return React.createElement(ProposalRow, {\n          key: \"proposal-row-\".concat(proposal.id),\n          proposal: proposal,\n          onClickProposal: _this2.onClickProposal,\n          active: detailsProposal && proposal.id === detailsProposal.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        });\n      })), React.createElement(\"div\", {\n        className: css(styles.ProposalList_detailsView),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(ProposalDetails, {\n        proposal: detailsProposal || proposals[0],\n        contactProposer: this.contactProposer,\n        shareProposal: this.shareProposal,\n        fetchProposals: fetchProposals,\n        fetchPublications: fetchPublications,\n        fetchPatents: fetchPatents,\n        fetchFundings: fetchFundings,\n        fundings: fundings,\n        publications: publications,\n        patents: patents,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return ProposalList;\n}(PureComponent);\n\nProposalList.propTypes = {\n  proposals: PropTypes.arrayOf(PropTypes.object)\n};\nProposalList.defaultProps = {\n  proposals: []\n};\nexport default ProposalList;","map":{"version":3,"sources":["/Volumes/Work/work/dev/project/projects/halo/app/javascript/src/marketplace/components/ProposalsDashboard/ProposalList.jsx"],"names":["React","PureComponent","PropTypes","connect","Link","intersection","css","StyleSheet","_","COLORS","ProposalRow","ProposalDetails","ContactModal","ShareModal","styles","create","ProposalList_noResultsText","textAlign","fontSize","marginTop","ProposalList_resultRow","textDecoration","ProposalList_container","display","ProposalList_listView","width","paddingTop","ProposalList_detailsView","ProposalList","props","contactProposer","proposal","status","setState","contactProposal","contactStatus","contactModalOpen","closeContactModal","shareProposal","sharedProposal","shareModalOpen","onClickProposal","detailsProposal","closeShareModal","state","undefined","proposals","prevProps","prevState","length","map","p","id","includes","fetchProposals","publications","fundings","patents","fetchPublications","fetchFundings","fetchPatents","orderBy","idx","propTypes","arrayOf","object","defaultProps"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { intersection } from 'lodash';\nimport { css, StyleSheet } from 'aphrodite';\nimport _ from 'lodash';\n\nimport { COLORS } from '../../../../constants';\nimport ProposalRow from './ProposalRow';\nimport ProposalDetails from './ProposalDetails';\nimport ContactModal from './ContactModal';\nimport ShareModal from './ShareModal';\n\nconst styles = StyleSheet.create({\n  ProposalList_noResultsText: {\n    textAlign: 'center',\n    fontSize: '14px',\n    marginTop: '30px',\n  },\n  ProposalList_resultRow: {\n    textDecoration: 'none',\n  },\n  ProposalList_container: {\n    display: 'flex',\n  },\n  ProposalList_listView: {\n    width: '30%',\n    paddingTop: '55px',\n  },\n  ProposalList_detailsView: {\n    width: '60%',\n    paddingTop: '55px',\n  },\n});\n\nclass ProposalList extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      contactProposal: undefined,\n      shareProposal: undefined,\n      detailsProposal: (props.proposals || [])[0],\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if ((!prevState.detailsProposal && this.props.proposals.length > 0) ||\n        (prevState.detailsProposal && !this.props.proposals.map((p) => p.id).includes(prevState.detailsProposal.id))) {\n      this.setState({ detailsProposal: this.props.proposals[0] });\n    }\n  }\n\n  contactProposer = (proposal, status) => {\n    this.setState({\n      contactProposal: proposal,\n      contactStatus: status,\n      contactModalOpen: true,\n    });\n  }\n\n  closeContactModal = () => {\n    this.setState({ contactModalOpen: false });\n  }\n\n  shareProposal = (proposal) => {\n    this.setState({\n      sharedProposal: proposal,\n      shareModalOpen: true,\n    });\n  }\n\n  onClickProposal = (proposal) => {\n    this.setState({ detailsProposal: proposal });\n  }\n\n  closeShareModal = () => {\n    this.setState({ shareModalOpen: false });\n  }\n\n  render() {\n    const {\n      proposals,\n      fetchProposals,\n      publications,\n      fundings,\n      patents,\n      fetchPublications,\n      fetchFundings,\n      fetchPatents,\n    } = this.props;\n    const {\n      contactProposal,\n      contactModalOpen,\n      contactStatus,\n      sharedProposal,\n      shareModalOpen,\n      detailsProposal,\n    } = this.state;\n\n    return (\n      <div>\n        <ContactModal\n          proposal={contactProposal}\n          open={contactModalOpen}\n          status={contactStatus}\n          closeContactModal={this.closeContactModal}\n          fetchProposals={fetchProposals}\n        />\n\n        <ShareModal\n          proposal={sharedProposal}\n          open={shareModalOpen}\n          closeShareModal={this.closeShareModal}\n        />\n\n        {proposals.length === 0 ? (\n          <div className={css(styles.ProposalList_noResultsText)}>\n            No proposals of this type exist for this RFP\n          </div>\n        ) : (\n          <div className={css(styles.ProposalList_container)}>\n            <div className={css(styles.ProposalList_listView)}>\n              {\n                _.orderBy(proposals, ['id'], ['asc']).map((proposal, idx) => {\n                  return (\n                    <ProposalRow\n                      key={`proposal-row-${proposal.id}`}\n                      proposal={proposal}\n                      onClickProposal={this.onClickProposal}\n                      active={detailsProposal && proposal.id === detailsProposal.id}\n                    />\n                  );\n                })\n              }\n            </div>\n            <div className={css(styles.ProposalList_detailsView)}>\n              <ProposalDetails\n                proposal={detailsProposal || proposals[0]}\n                contactProposer={this.contactProposer}\n                shareProposal={this.shareProposal}\n                fetchProposals={fetchProposals}\n                fetchPublications={fetchPublications}\n                fetchPatents={fetchPatents}\n                fetchFundings={fetchFundings}\n                fundings={fundings}\n                publications={publications}\n                patents={patents}\n              />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nProposalList.propTypes = {\n  proposals: PropTypes.arrayOf(PropTypes.object),\n};\n\nProposalList.defaultProps = {\n  proposals: [],\n};\n\nexport default ProposalList;\n"]},"metadata":{},"sourceType":"module"}