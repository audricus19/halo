{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Volumes/Work/work/dev/project/projects/halo/app/javascript/src/marketplace/components/ProposalsDashboard/ShareModal.jsx\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { css, StyleSheet } from 'aphrodite';\nimport { Modal, Button, Dropdown, Input, Icon } from 'semantic-ui-react';\nimport _ from 'lodash';\nimport Validator from 'validator';\nimport { COLORS, PROPOSAL_STATUSES } from '../../../../constants';\nimport { authenticityToken } from '../../utils/requests';\nvar styles = StyleSheet.create({\n  ShareModal_modal: {},\n  ShareModal_modalFieldLabel: {\n    textAlign: 'left',\n    margin: '10px 0 6px',\n    width: '100%',\n    fontSize: '12px',\n    fontWeight: 500,\n    lineHeight: '16px',\n    color: COLORS.labelGray\n  },\n  ShareModal_modalTextArea: {\n    width: '100%',\n    margin: 'auto',\n    padding: '10px',\n    fontSize: '14px',\n    lineHeight: '20px',\n    border: \"1px solid \".concat(COLORS.lightGray)\n  },\n  ShareModal_modalSubmitButton: {\n    background: COLORS.lightBlue,\n    backgroundImage: 'linear-gradient(134.72deg, #4E9DF5 0%, #48B2F4 100%)',\n    display: 'inline-block',\n    height: '48px',\n    textAlign: 'center',\n    color: COLORS.white,\n    fontSize: '14px',\n    fontWeight: 500,\n    lineHeight: '20px',\n    padding: '5px 50px',\n    width: '100%'\n  },\n  ShareModal_modalButtonHolder: {\n    width: '100%',\n    display: 'inline-block',\n    textAlign: 'right',\n    marginTop: '36px',\n    marginBottom: '25px'\n  },\n  ShareModal_modalCancelButton: {\n    height: '48px',\n    textAlign: 'center',\n    color: COLORS.lightBlack,\n    backgroundColor: COLORS.white,\n    display: 'inline-block',\n    fontSize: '14px',\n    fontWeight: 500,\n    lineHeight: '20px',\n    padding: '5px 50px'\n  },\n  ShareModal_title: {\n    fontSize: '24px'\n  },\n  ShareModal_dropdown: {\n    width: '50%',\n    display: 'flex',\n    height: '48px',\n    alignItems: 'center',\n    lineHeight: '20px',\n    borderStyle: 'solid',\n    borderWidth: '1px',\n    borderColor: COLORS.gray,\n    marginBottom: '20px',\n    fontSize: '14px'\n  },\n  ShareModal_label: {\n    display: 'block',\n    color: COLORS.darkGray,\n    fontSize: '12px',\n    lineHeight: '16px',\n    fontWeight: 500\n  },\n  ShareModal_inputField: {\n    width: '100%',\n    border: \"1px solid \".concat(COLORS.lightGray),\n    padding: '5px 12px',\n    borderRadius: '4px',\n    height: '48px',\n    fontSize: '14px'\n  },\n  ShareModal_firstNameField: {\n    marginTop: '15px',\n    marginBottom: '15px',\n    marginRight: '4%',\n    width: '48%',\n    display: 'inline-block'\n  },\n  ShareModal_lastNameField: {\n    marginTop: '15px',\n    marginBottom: '15px',\n    width: '48%',\n    display: 'inline-block'\n  },\n  ShareModal_formField: {\n    marginBottom: '15px'\n  },\n  ShareModal_header: {\n    fontSize: '24px',\n    fontWeight: 500,\n    textAlign: 'center',\n    margin: 'auto',\n    marginTop: '40px',\n    color: COLORS.lightBlack\n  },\n  ShareModal_subheader: {\n    fontSize: '14px',\n    textAlign: 'center',\n    margin: 'auto',\n    color: COLORS.lightBlack,\n    marginBottom: '15px'\n  }\n});\n\nvar ShareModal =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(ShareModal, _PureComponent);\n\n  function ShareModal(props) {\n    var _this;\n\n    _classCallCheck(this, ShareModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ShareModal).call(this, props));\n\n    _this.handleSubmitMessage = function _callee(e) {\n      var _this$props, closeShareModal, proposal, _this$state, message, email, firstName, lastName, formData, messageResponse, responseJson;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props = _this.props, closeShareModal = _this$props.closeShareModal, proposal = _this$props.proposal;\n              e.preventDefault();\n              _this$state = _this.state, message = _this$state.message, email = _this$state.email, firstName = _this$state.firstName, lastName = _this$state.lastName;\n\n              _this.setState({\n                shareModalLoading: true\n              });\n\n              formData = new FormData();\n              formData.append('message', message);\n              formData.append('proposal_id', proposal.id);\n              formData.append('first_name', firstName);\n              formData.append('last_name', lastName);\n              formData.append('email', email);\n              _context.prev = 10;\n              _context.next = 13;\n              return _regeneratorRuntime.awrap(fetch('/messages/share_proposal', {\n                method: 'POST',\n                body: formData,\n                headers: {\n                  'Accept': 'application/json',\n                  'X-CSRF-Token': authenticityToken()\n                }\n              }));\n\n            case 13:\n              messageResponse = _context.sent;\n              _context.next = 16;\n              return _regeneratorRuntime.awrap(messageResponse.json());\n\n            case 16:\n              responseJson = _context.sent;\n\n              if (!responseJson.success) {\n                _this.setState({\n                  shareModalLoading: false\n                });\n              } else {\n                _this.setState({\n                  message: '',\n                  shareModalLoading: false\n                });\n\n                window.location.reload();\n              }\n\n              _context.next = 23;\n              break;\n\n            case 20:\n              _context.prev = 20;\n              _context.t0 = _context[\"catch\"](10);\n\n              _this.setState({\n                shareModalLoading: false\n              });\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[10, 20]]);\n    };\n\n    _this.handleChange = function (e, attr) {\n      _this.setState(_defineProperty({}, attr, e.target.value));\n    };\n\n    _this.state = {\n      shareModalLoading: false,\n      message: '',\n      firstName: '',\n      lastName: '',\n      email: ''\n    };\n    return _this;\n  }\n\n  _createClass(ShareModal, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          open = _this$props2.open,\n          proposal = _this$props2.proposal,\n          closeShareModal = _this$props2.closeShareModal;\n      var _this$state2 = this.state,\n          message = _this$state2.message,\n          firstName = _this$state2.firstName,\n          lastName = _this$state2.lastName,\n          email = _this$state2.email,\n          shareModalLoading = _this$state2.shareModalLoading;\n      var validMessage = !shareModalLoading && !Validator.isEmpty(message) && !Validator.isEmpty(firstName) && !Validator.isEmpty(lastName) && !Validator.isEmpty(email) && Validator.isEmail(email);\n      return React.createElement(Modal, {\n        open: open,\n        onClose: closeShareModal,\n        size: \"tiny\",\n        closeOnDimmerClick: true,\n        className: \"\".concat(css(styles.ShareModal_modal), \" scrolling\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(Modal.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        size: \"large\",\n        name: \"close\",\n        onClick: closeShareModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: css(styles.ShareModal_header),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, \"Send to colleague\"), React.createElement(\"div\", {\n        className: css(styles.ShareModal_subheader),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"Who would you like to see the proposal?\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: css(styles.ShareModal_firstNameField),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: css(styles.ShareModal_inputField),\n        name: \"firstName\",\n        value: firstName,\n        placeholder: \"First Name\",\n        onChange: function onChange(e) {\n          return _this2.handleChange(e, 'firstName');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: css(styles.ShareModal_lastNameField),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: css(styles.ShareModal_inputField),\n        name: \"lastName\",\n        value: lastName,\n        placeholder: \"Last Name\",\n        onChange: function onChange(e) {\n          return _this2.handleChange(e, 'lastName');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: css(styles.ShareModal_formField),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(Input, {\n        className: css(styles.ShareModal_inputField),\n        name: \"email\",\n        fluid: true,\n        transparent: true,\n        type: \"text\",\n        icon: \"mail outline\",\n        value: email,\n        placeholder: \"Email\",\n        onChange: function onChange(e) {\n          return _this2.handleChange(e, 'email');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        placeholder: \"Add a message (optional)\",\n        className: css(styles.ShareModal_modalTextArea),\n        rows: \"4\",\n        value: message,\n        onChange: function onChange(e) {\n          return _this2.handleChange(e, 'message');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: css(styles.ShareModal_modalButtonHolder),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: css(styles.ShareModal_modalSubmitButton),\n        type: \"submit\",\n        disabled: !validMessage,\n        onClick: this.handleSubmitMessage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, \"Send\"))));\n    }\n  }]);\n\n  return ShareModal;\n}(PureComponent);\n\nShareModal.propTypes = {\n  proposal: PropTypes.object,\n  open: PropTypes.bool,\n  closeShareModal: PropTypes.func\n};\nexport default ShareModal;","map":{"version":3,"sources":["/Volumes/Work/work/dev/project/projects/halo/app/javascript/src/marketplace/components/ProposalsDashboard/ShareModal.jsx"],"names":["React","PureComponent","PropTypes","connect","css","StyleSheet","Modal","Button","Dropdown","Input","Icon","_","Validator","COLORS","PROPOSAL_STATUSES","authenticityToken","styles","create","ShareModal_modal","ShareModal_modalFieldLabel","textAlign","margin","width","fontSize","fontWeight","lineHeight","color","labelGray","ShareModal_modalTextArea","padding","border","lightGray","ShareModal_modalSubmitButton","background","lightBlue","backgroundImage","display","height","white","ShareModal_modalButtonHolder","marginTop","marginBottom","ShareModal_modalCancelButton","lightBlack","backgroundColor","ShareModal_title","ShareModal_dropdown","alignItems","borderStyle","borderWidth","borderColor","gray","ShareModal_label","darkGray","ShareModal_inputField","borderRadius","ShareModal_firstNameField","marginRight","ShareModal_lastNameField","ShareModal_formField","ShareModal_header","ShareModal_subheader","ShareModal","props","handleSubmitMessage","e","closeShareModal","proposal","preventDefault","state","message","email","firstName","lastName","setState","shareModalLoading","formData","FormData","append","id","fetch","method","body","headers","messageResponse","json","responseJson","success","window","location","reload","handleChange","attr","target","value","open","validMessage","isEmpty","isEmail","propTypes","object","bool","func"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { css, StyleSheet } from 'aphrodite';\nimport { Modal, Button, Dropdown, Input, Icon } from 'semantic-ui-react';\nimport _ from 'lodash';\nimport Validator from 'validator';\nimport { COLORS, PROPOSAL_STATUSES } from '../../../../constants';\nimport {\n  authenticityToken,\n} from '../../utils/requests';\n\nconst styles = StyleSheet.create({\n  ShareModal_modal: {\n\n  },\n  ShareModal_modalFieldLabel: {\n    textAlign: 'left',\n    margin: '10px 0 6px',\n    width: '100%',\n    fontSize: '12px',\n    fontWeight: 500,\n    lineHeight: '16px',\n    color: COLORS.labelGray,\n  },\n  ShareModal_modalTextArea: {\n    width: '100%',\n    margin: 'auto',\n    padding: '10px',\n    fontSize: '14px',\n    lineHeight: '20px',\n    border: `1px solid ${COLORS.lightGray}`,\n  },\n  ShareModal_modalSubmitButton: {\n    background: COLORS.lightBlue,\n    backgroundImage: 'linear-gradient(134.72deg, #4E9DF5 0%, #48B2F4 100%)',\n    display: 'inline-block',\n    height: '48px',\n    textAlign: 'center',\n    color: COLORS.white,\n    fontSize: '14px',\n    fontWeight: 500,\n    lineHeight: '20px',\n    padding: '5px 50px',\n    width: '100%',\n  },\n  ShareModal_modalButtonHolder: {\n    width: '100%',\n    display: 'inline-block',\n    textAlign: 'right',\n    marginTop: '36px',\n    marginBottom: '25px',\n  },\n  ShareModal_modalCancelButton: {\n    height: '48px',\n    textAlign: 'center',\n    color: COLORS.lightBlack,\n    backgroundColor: COLORS.white,\n    display: 'inline-block',\n    fontSize: '14px',\n    fontWeight: 500,\n    lineHeight: '20px',\n    padding: '5px 50px',\n  },\n  ShareModal_title: {\n    fontSize: '24px',\n  },\n  ShareModal_dropdown: {\n    width: '50%',\n    display: 'flex',\n    height: '48px',\n    alignItems: 'center',\n    lineHeight: '20px',\n    borderStyle: 'solid',\n    borderWidth: '1px',\n    borderColor: COLORS.gray,\n    marginBottom: '20px',\n    fontSize: '14px',\n  },\n  ShareModal_label: {\n    display: 'block',\n    color: COLORS.darkGray,\n    fontSize: '12px',\n    lineHeight: '16px',\n    fontWeight: 500,\n  },\n  ShareModal_inputField: {\n    width: '100%',\n    border: `1px solid ${COLORS.lightGray}`,\n    padding: '5px 12px',\n    borderRadius: '4px',\n    height: '48px',\n    fontSize: '14px',\n  },\n  ShareModal_firstNameField: {\n    marginTop: '15px',\n    marginBottom: '15px',\n    marginRight: '4%',\n    width: '48%',\n    display: 'inline-block',\n  },\n  ShareModal_lastNameField: {\n    marginTop: '15px',\n    marginBottom: '15px',\n    width: '48%',\n    display: 'inline-block',\n  },\n  ShareModal_formField: {\n    marginBottom: '15px',\n  },\n  ShareModal_header: {\n    fontSize: '24px',\n    fontWeight: 500,\n    textAlign: 'center',\n    margin: 'auto',\n    marginTop: '40px',\n    color: COLORS.lightBlack,\n  },\n  ShareModal_subheader: {\n    fontSize: '14px',\n    textAlign: 'center',\n    margin: 'auto',\n    color: COLORS.lightBlack,\n    marginBottom: '15px',\n  },\n});\n\nclass ShareModal extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shareModalLoading: false,\n      message: '',\n      firstName: '',\n      lastName: '',\n      email: '',\n    };\n  }\n\n  handleSubmitMessage = async (e) => {\n    const {\n      closeShareModal,\n      proposal,\n    } = this.props;\n\n    e.preventDefault();\n\n    const {\n      message,\n      email,\n      firstName,\n      lastName,\n    } = this.state;\n\n    this.setState({\n      shareModalLoading: true,\n    });\n\n    const formData = new FormData();\n    formData.append('message', message);\n    formData.append('proposal_id', proposal.id);\n    formData.append('first_name', firstName);\n    formData.append('last_name', lastName);\n    formData.append('email', email);\n\n    try {\n      const messageResponse = await fetch('/messages/share_proposal', {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Accept': 'application/json',\n          'X-CSRF-Token': authenticityToken(),\n        }\n      });\n      const responseJson = await messageResponse.json();\n      if (!responseJson.success) {\n        this.setState({\n          shareModalLoading: false,\n        });\n      } else {\n        this.setState({\n          message: '',\n          shareModalLoading: false,\n        });\n        window.location.reload();\n      }\n    } catch(err) {\n      this.setState({ shareModalLoading: false });\n    }\n  }\n\n  handleChange = (e, attr) => {\n    this.setState({ [attr]: e.target.value });\n  };\n\n  render() {\n    const {\n      open,\n      proposal,\n      closeShareModal,\n    } = this.props;\n\n    const {\n      message,\n      firstName,\n      lastName,\n      email,\n      shareModalLoading,\n    } = this.state;\n\n    const validMessage =\n      !shareModalLoading &&\n      !Validator.isEmpty(message) &&\n      !Validator.isEmpty(firstName) &&\n      !Validator.isEmpty(lastName) &&\n      !Validator.isEmpty(email) &&\n      Validator.isEmail(email);\n    return (\n      <Modal\n        open={open}\n        onClose={closeShareModal}\n        size=\"tiny\"\n        closeOnDimmerClick\n        className={`${css(styles.ShareModal_modal)} scrolling`}\n      >\n        <Modal.Content>\n          <Icon size=\"large\" name=\"close\" onClick={closeShareModal} />\n          <div className={css(styles.ShareModal_header)}>Send to colleague</div>\n          <div className={css(styles.ShareModal_subheader)}>Who would you like to see the proposal?</div>\n          <div>\n            <div className={css(styles.ShareModal_firstNameField)}>\n              <input\n                className={css(styles.ShareModal_inputField)}\n                name='firstName'\n                value={firstName}\n                placeholder='First Name'\n                onChange={(e) => this.handleChange(e, 'firstName')}\n              />\n            </div>\n            <div className={css(styles.ShareModal_lastNameField)}>\n              <input\n                className={css(styles.ShareModal_inputField)}\n                name='lastName'\n                value={lastName}\n                placeholder='Last Name'\n                onChange={(e) => this.handleChange(e, 'lastName')}\n              />\n            </div>\n          </div>\n          <div className={css(styles.ShareModal_formField)}>\n            <Input\n              className={css(styles.ShareModal_inputField)}\n              name='email'\n              fluid\n              transparent\n              type=\"text\"\n              icon=\"mail outline\"\n              value={email}\n              placeholder='Email'\n              onChange={(e) => this.handleChange(e, 'email')}\n            />\n          </div>\n          <div>\n            <textarea\n              placeholder=\"Add a message (optional)\"\n              className={css(styles.ShareModal_modalTextArea)}\n              rows=\"4\"\n              value={message}\n              onChange={(e) => this.handleChange(e, 'message')}\n            />\n          </div>\n          <div className={css(styles.ShareModal_modalButtonHolder)}>\n            <Button\n              className={css(styles.ShareModal_modalSubmitButton)}\n              type='submit'\n              disabled={!validMessage}\n              onClick={this.handleSubmitMessage}\n            >\n              Send\n            </Button>\n          </div>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n\nShareModal.propTypes = {\n  proposal: PropTypes.object,\n  open: PropTypes.bool,\n  closeShareModal: PropTypes.func,\n};\n\nexport default ShareModal;\n"]},"metadata":{},"sourceType":"module"}