{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Volumes/Work/work/dev/project/projects/halo/app/javascript/src/scientistSignup/components/SimpleAuthPage/SimpleAuthPage.jsx\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { PureComponent } from 'react';\nimport { css, StyleSheet } from 'aphrodite';\nimport PropTypes from 'prop-types';\nimport { Container, Grid, Button, Form, Input, Message } from 'semantic-ui-react';\nimport Validator from 'validator';\nimport axios from 'axios';\nimport { COLORS, WINDOW_DIMENSIONS } from '../../../../constants';\nimport haloLogo from '../../../../images/logos/halo_logo.svg';\nimport signUpGraphic from '../../../../images/backgrounds/scientist-background.png';\nimport { authenticityToken, getCookie } from '../../../marketplace/utils/requests';\nvar TABLET_MEDIA_QUERY = WINDOW_DIMENSIONS.TABLET_MEDIA_QUERY;\nvar styles = StyleSheet.create({\n  SimpleAuthPage_container: {\n    height: '100%',\n    paddingBottom: '1px'\n  },\n  SimpleAuthPage_backgroundPane: {\n    width: '100%',\n    height: '100%',\n    display: 'inline-block',\n    position: 'absolute',\n    backgroundColor: COLORS.darkBlue,\n    backgroundImage: \"url(\".concat(signUpGraphic, \")\"),\n    backgroundSize: 'cover',\n    zIndex: -100\n  },\n  SimpleAuthPage_innerContainer: _defineProperty({\n    backgroundColor: 'white',\n    margin: '20px auto',\n    padding: '20px',\n    maxWidth: '40%'\n  }, TABLET_MEDIA_QUERY, {\n    maxWidth: '95%'\n  }),\n  SimpleAuthPage_grid: {},\n  SimpleAuthPage_logoContainer: {\n    marginTop: '25px',\n    textAlign: 'center'\n  },\n  SimpleAuthPage_hero: {\n    marginTop: '20px'\n  },\n  SimpleAuthPage_headline: {\n    color: COLORS.lightBlack,\n    fontSize: '36px',\n    fontWeight: 'bold',\n    lineHeight: '48px',\n    marginBottom: '10px',\n    textAlign: 'center'\n  },\n  SimpleAuthPage_subheadline: {\n    color: COLORS.darkGray,\n    fontSize: '16px',\n    lineHeight: '24px',\n    marginBottom: '20px',\n    textAlign: 'center'\n  },\n  SimpleAuthPage_innerRightPane: {\n    width: '100%'\n  },\n  SimpleAuthPage_signupPanel: {},\n  SimpleAuthPage_footerText: {\n    color: COLORS.lightBlack,\n    fontSize: '13px'\n  },\n  SimpleAuthPage_alreadyHaveAccount: {\n    textAlign: 'center',\n    display: 'inline-block',\n    fontSize: '15px',\n    fontWeight: 'bold',\n    lineHeight: '24px',\n    color: COLORS.lightBlack\n  },\n  SimpleAuthPage_signInLink: {\n    fontWeight: 'normal',\n    textDecoration: 'underline',\n    color: COLORS.lightBlack,\n    cursor: 'pointer'\n  },\n  SimpleAuthPage_label: {\n    display: 'block',\n    color: COLORS.darkGray,\n    fontSize: '12px',\n    lineHeight: '16px',\n    fontWeight: 500\n  },\n  SimpleAuthPage_inputField: {\n    width: '100%',\n    border: \"1px solid \".concat(COLORS.lightGray),\n    padding: '5px 12px',\n    borderRadius: '4px',\n    height: '48px',\n    fontSize: '14px'\n  },\n  SimpleAuthPage_submitButton: {\n    marginTop: '10px',\n    width: '100%',\n    background: COLORS.lightBlue,\n    backgroundImage: 'linear-gradient(134.72deg, #4E9DF5 0%, #48B2F4 100%)',\n    color: COLORS.white,\n    padding: '12px',\n    borderRadius: '4px',\n    height: '48px',\n    fontSize: '14px'\n  },\n  SimpleAuthPage_formField: {\n    marginTop: '15px',\n    marginBottom: '15px'\n  },\n  SimpleAuthPage_forgotPasswordContainer: {\n    textAlign: 'center',\n    marginTop: '10px'\n  },\n  SimpleAuthPage_forgotPassword: {\n    textDecoration: 'underline',\n    color: COLORS.darkGray,\n    fontSize: '13px',\n    lineHeight: '24px'\n  },\n  SimpleAuthPage_horizontalRule: {\n    marginTop: '16px',\n    marginBottom: '16px'\n  }\n});\n\nvar SimpleAuthPage =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(SimpleAuthPage, _PureComponent);\n\n  function SimpleAuthPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SimpleAuthPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SimpleAuthPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      password: '',\n      email: '',\n      isSubmitting: false,\n      hasSubmitted: false,\n      error: '',\n      errors: {}\n    };\n\n    _this.openORCID = function (e) {\n      e.preventDefault();\n      var clientId = process.env.ORCID_CLIENT_ID;\n      window.open(\"https://\".concat(process.env.ORCID_URL, \"/oauth/authorize?client_id=\").concat(process.env.ORCID_CLIENT_ID, \"&response_type=code&scope=/authenticate&redirect_uri=\").concat(process.env.ORCID_REDIRECT), \"_blank\", \"toolbar=no, scrollbars=yes, width=500, height=600, top=500, left=500\");\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({\n        hasSubmitted: false\n      }, e.target.name, e.target.value));\n    };\n\n    _this.handleLogin = function _callee() {\n      var _this$state, email, password, formData, loginResponse, responseJson;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$state = _this.state, email = _this$state.email, password = _this$state.password;\n\n              _this.setState({\n                isSubmitting: true,\n                error: '',\n                hasSubmitted: true\n              });\n\n              formData = new FormData();\n              formData.append('user[email]', email);\n              formData.append('user[password]', password);\n              _context.prev = 5;\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(fetch('/users/sign_in', {\n                method: 'POST',\n                body: formData,\n                headers: {\n                  'Accept': 'application/json',\n                  'X-CSRF-Token': authenticityToken()\n                }\n              }));\n\n            case 8:\n              loginResponse = _context.sent;\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(loginResponse.json());\n\n            case 11:\n              responseJson = _context.sent;\n\n              if (responseJson.error) {\n                _this.setState({\n                  isSubmitting: false,\n                  error: responseJson.error\n                });\n              } else {\n                window.location.href = '/redirect_login';\n              }\n\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](5);\n\n              _this.setState({\n                isSubmitting: false\n              });\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[5, 15]]);\n    };\n\n    _this.submitToHubspot = function _callee2() {\n      var email, portalID, formID, url;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!window.location.host.includes(\"halocures.com\")) {\n                _context2.next = 13;\n                break;\n              }\n\n              email = _this.state.email;\n              portalID = '6895929'; // Scientist Registration\n\n              formID = '5fb3e11f-bf56-4b75-9a0b-632e5888e33f'; // https://developers.hubspot.com/docs/methods/forms/submit_form_v3\n\n              url = \"https://api.hsforms.com/submissions/v3/integration/submit/\".concat(portalID, \"/\").concat(formID);\n              _context2.prev = 5;\n              _context2.next = 8;\n              return _regeneratorRuntime.awrap(axios.post(url, {\n                fields: [{\n                  name: 'email',\n                  value: email\n                }],\n                context: {\n                  hutk: getCookie('hubspotutk')\n                }\n              }));\n\n            case 8:\n              _context2.next = 13;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](5);\n              console.log(_context2.t0);\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[5, 10]]);\n    };\n\n    _this.handleRegister = function _callee3() {\n      var _this$state2, email, password, formData, createUserResponse, responseJson;\n\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _this$state2 = _this.state, email = _this$state2.email, password = _this$state2.password;\n\n              _this.setState({\n                isSubmitting: true,\n                errors: {},\n                hasSubmitted: true\n              });\n\n              formData = new FormData();\n              formData.append('user[email]', email);\n              formData.append('user[password]', password);\n              _context3.prev = 5;\n              _context3.next = 8;\n              return _regeneratorRuntime.awrap(fetch('/users', {\n                method: 'POST',\n                body: formData,\n                headers: {\n                  'Accept': 'application/json',\n                  'X-CSRF-Token': authenticityToken()\n                }\n              }));\n\n            case 8:\n              createUserResponse = _context3.sent;\n              _context3.next = 11;\n              return _regeneratorRuntime.awrap(createUserResponse.json());\n\n            case 11:\n              responseJson = _context3.sent;\n\n              if (!responseJson.errors) {\n                _context3.next = 16;\n                break;\n              }\n\n              _this.setState({\n                isSubmitting: false,\n                errors: responseJson.errors\n              });\n\n              _context3.next = 19;\n              break;\n\n            case 16:\n              _context3.next = 18;\n              return _regeneratorRuntime.awrap(_this.submitToHubspot());\n\n            case 18:\n              window.location.href = '/redirect_login';\n\n            case 19:\n              _context3.next = 24;\n              break;\n\n            case 21:\n              _context3.prev = 21;\n              _context3.t0 = _context3[\"catch\"](5);\n\n              _this.setState({\n                isSubmitting: false\n              });\n\n            case 24:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, [[5, 21]]);\n    };\n\n    return _this;\n  }\n\n  _createClass(SimpleAuthPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state3 = this.state,\n          email = _this$state3.email,\n          password = _this$state3.password,\n          isSubmitting = _this$state3.isSubmitting,\n          hasSubmitted = _this$state3.hasSubmitted,\n          error = _this$state3.error,\n          errors = _this$state3.errors;\n      var _this$props = this.props,\n          isLogin = _this$props.isLogin,\n          switchLink = _this$props.switchLink;\n      var hasErrors = hasSubmitted && (error.length > 0 || Object.keys(errors).length > 0);\n      var errorKey = errors && Object.keys(errors).length > 0 && Object.keys(errors)[0];\n      var registrationError = errorKey && Object.keys(errors).length > 0 && \"\".concat(errorKey, \": \").concat(errors[errorKey]);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: css(styles.SimpleAuthPage_container),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: css(styles.SimpleAuthPage_backgroundPane),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: css(styles.SimpleAuthPage_innerContainer),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: css(styles.SimpleAuthPage_logoContainer),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: haloLogo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }))), React.createElement(Grid, {\n        centered: true,\n        columns: 2,\n        className: css(styles.SimpleAuthPage_grid),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(Grid.Row, {\n        centered: true,\n        columns: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(Grid.Column, {\n        width: 15,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: css(styles.SimpleAuthPage_hero),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: css(styles.SimpleAuthPage_headline),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, isLogin ? \"Welcome Back!\" : \"Move Science Forward\"), React.createElement(\"div\", {\n        className: css(styles.SimpleAuthPage_subheadline),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, isLogin ? \"Sign in to keep your profile current and stay up-to-date on the newest opportunities to work with industry\" : \"Join a network of scientists and partners in search of opportunities to collaborate\")), React.createElement(\"div\", {\n        className: css(styles.SimpleAuthPage_innerRightPane),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: css(styles.SimpleAuthPage_signupPanel),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: isLogin ? this.handleLogin : this.handleRegister,\n        error: hasErrors,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, React.createElement(Message, {\n        error: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, React.createElement(Message.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, isLogin ? \"Login invalid\" : \"Registration invalid\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, isLogin ? \"That doesn’t look like the right password. Give it another try or select \\\"Forgot Password\\\" below\" : \"That doesn’t look right. Give it another try. Fill in all fields and password must be at least 6 characters.\")), React.createElement(Form.Field, {\n        className: css(styles.SimpleAuthPage_formField),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: css(styles.SimpleAuthPage_inputField),\n        name: \"email\",\n        value: email,\n        placeholder: \"E-mail\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      })), React.createElement(Form.Field, {\n        className: css(styles.SimpleAuthPage_formField),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: css(styles.SimpleAuthPage_inputField),\n        name: \"password\",\n        value: password,\n        type: \"password\",\n        placeholder: \"Password\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      })), React.createElement(Button, {\n        disabled: isSubmitting,\n        loading: isSubmitting,\n        className: css(styles.SimpleAuthPage_submitButton),\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, isLogin ? \"Sign in\" : \"Create Account\")), React.createElement(\"div\", {\n        className: css(styles.SimpleAuthPage_forgotPasswordContainer),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, !isLogin && React.createElement(\"span\", {\n        className: css(styles.SimpleAuthPage_footerText),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }, \"By signing up you agree to the \"), isLogin ? React.createElement(\"a\", {\n        className: css(styles.SimpleAuthPage_forgotPassword),\n        href: \"/users/password/new\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }, \"Forgot password?\") : React.createElement(\"a\", {\n        className: css(styles.SimpleAuthPage_forgotPassword),\n        href: \"/terms\",\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, \"Terms of Service\"), !isLogin && React.createElement(\"span\", {\n        className: css(styles.SimpleAuthPage_footerText),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, ' & '), !isLogin && React.createElement(\"a\", {\n        className: css(styles.SimpleAuthPage_forgotPassword),\n        href: \"/privacy_policy\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, \"Privacy Policy\"), React.createElement(\"hr\", {\n        className: css(styles.SimpleAuthPage_horizontalRule),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: css(styles.SimpleAuthPage_alreadyHaveAccount),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, isLogin ? \"Don’t have an account?\" : \"Already have an account?\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: css(styles.SimpleAuthPage_signInLink),\n        href: switchLink,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, \" \", isLogin ? \"Sign up\" : \"Sign in\")))))))))));\n    }\n  }]);\n\n  return SimpleAuthPage;\n}(PureComponent);\n\nexport default SimpleAuthPage;","map":{"version":3,"sources":["/Volumes/Work/work/dev/project/projects/halo/app/javascript/src/scientistSignup/components/SimpleAuthPage/SimpleAuthPage.jsx"],"names":["React","PureComponent","css","StyleSheet","PropTypes","Container","Grid","Button","Form","Input","Message","Validator","axios","COLORS","WINDOW_DIMENSIONS","haloLogo","signUpGraphic","authenticityToken","getCookie","TABLET_MEDIA_QUERY","styles","create","SimpleAuthPage_container","height","paddingBottom","SimpleAuthPage_backgroundPane","width","display","position","backgroundColor","darkBlue","backgroundImage","backgroundSize","zIndex","SimpleAuthPage_innerContainer","margin","padding","maxWidth","SimpleAuthPage_grid","SimpleAuthPage_logoContainer","marginTop","textAlign","SimpleAuthPage_hero","SimpleAuthPage_headline","color","lightBlack","fontSize","fontWeight","lineHeight","marginBottom","SimpleAuthPage_subheadline","darkGray","SimpleAuthPage_innerRightPane","SimpleAuthPage_signupPanel","SimpleAuthPage_footerText","SimpleAuthPage_alreadyHaveAccount","SimpleAuthPage_signInLink","textDecoration","cursor","SimpleAuthPage_label","SimpleAuthPage_inputField","border","lightGray","borderRadius","SimpleAuthPage_submitButton","background","lightBlue","white","SimpleAuthPage_formField","SimpleAuthPage_forgotPasswordContainer","SimpleAuthPage_forgotPassword","SimpleAuthPage_horizontalRule","SimpleAuthPage","state","password","email","isSubmitting","hasSubmitted","error","errors","openORCID","e","preventDefault","clientId","process","env","ORCID_CLIENT_ID","window","open","ORCID_URL","ORCID_REDIRECT","handleChange","setState","target","name","value","handleLogin","formData","FormData","append","fetch","method","body","headers","loginResponse","json","responseJson","location","href","submitToHubspot","host","includes","portalID","formID","url","post","fields","context","hutk","console","log","handleRegister","createUserResponse","props","isLogin","switchLink","hasErrors","length","Object","keys","errorKey","registrationError"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport { css, StyleSheet } from 'aphrodite';\nimport PropTypes from 'prop-types';\nimport { Container, Grid, Button, Form, Input, Message } from 'semantic-ui-react'\nimport Validator from 'validator';\nimport axios from 'axios';\n\nimport { COLORS, WINDOW_DIMENSIONS } from '../../../../constants';\nimport haloLogo from '../../../../images/logos/halo_logo.svg';\nimport signUpGraphic from '../../../../images/backgrounds/scientist-background.png';\nimport { authenticityToken, getCookie } from '../../../marketplace/utils/requests';\n\nconst { TABLET_MEDIA_QUERY } = WINDOW_DIMENSIONS;\n\nconst styles = StyleSheet.create({\n  SimpleAuthPage_container: {\n    height: '100%',\n    paddingBottom: '1px',\n  },\n  SimpleAuthPage_backgroundPane: {\n    width: '100%',\n    height: '100%',\n    display: 'inline-block',\n    position: 'absolute',\n    backgroundColor: COLORS.darkBlue,\n    backgroundImage: `url(${signUpGraphic})`,\n    backgroundSize: 'cover',\n    zIndex: -100,\n  },\n  SimpleAuthPage_innerContainer: {\n    backgroundColor: 'white',\n    margin: '20px auto',\n    padding: '20px',\n    maxWidth: '40%',\n    [TABLET_MEDIA_QUERY]: {\n      maxWidth: '95%',\n    },\n  },\n  SimpleAuthPage_grid: {\n\n  },\n  SimpleAuthPage_logoContainer: {\n    marginTop: '25px',\n    textAlign: 'center',\n  },\n  SimpleAuthPage_hero: {\n    marginTop: '20px',\n  },\n  SimpleAuthPage_headline: {\n    color: COLORS.lightBlack,\n    fontSize: '36px',\n    fontWeight: 'bold',\n    lineHeight: '48px',\n    marginBottom: '10px',\n    textAlign: 'center',\n  },\n  SimpleAuthPage_subheadline: {\n    color: COLORS.darkGray,\n    fontSize: '16px',\n    lineHeight: '24px',\n    marginBottom: '20px',\n    textAlign: 'center',\n  },\n  SimpleAuthPage_innerRightPane: {\n    width: '100%',\n  },\n  SimpleAuthPage_signupPanel: {\n\n  },\n  SimpleAuthPage_footerText: {\n    color: COLORS.lightBlack,\n    fontSize: '13px',\n  },\n  SimpleAuthPage_alreadyHaveAccount: {\n    textAlign: 'center',\n    display: 'inline-block',\n    fontSize: '15px',\n    fontWeight: 'bold',\n    lineHeight: '24px',\n    color: COLORS.lightBlack,\n  },\n  SimpleAuthPage_signInLink: {\n    fontWeight: 'normal',\n    textDecoration: 'underline',\n    color: COLORS.lightBlack,\n    cursor: 'pointer',\n  },\n  SimpleAuthPage_label: {\n    display: 'block',\n    color: COLORS.darkGray,\n    fontSize: '12px',\n    lineHeight: '16px',\n    fontWeight: 500,\n  },\n  SimpleAuthPage_inputField: {\n    width: '100%',\n    border: `1px solid ${COLORS.lightGray}`,\n    padding: '5px 12px',\n    borderRadius: '4px',\n    height: '48px',\n    fontSize: '14px',\n  },\n  SimpleAuthPage_submitButton: {\n    marginTop: '10px',\n    width: '100%',\n    background: COLORS.lightBlue,\n    backgroundImage: 'linear-gradient(134.72deg, #4E9DF5 0%, #48B2F4 100%)',\n    color: COLORS.white,\n    padding: '12px',\n    borderRadius: '4px',\n    height: '48px',\n    fontSize: '14px',\n  },\n  SimpleAuthPage_formField: {\n    marginTop: '15px',\n    marginBottom: '15px',\n  },\n  SimpleAuthPage_forgotPasswordContainer: {\n    textAlign: 'center',\n    marginTop: '10px',\n  },\n  SimpleAuthPage_forgotPassword: {\n    textDecoration: 'underline',\n    color: COLORS.darkGray,\n    fontSize: '13px',\n    lineHeight: '24px',\n  },\n  SimpleAuthPage_horizontalRule: {\n    marginTop: '16px',\n    marginBottom: '16px',\n  },\n});\n\nclass SimpleAuthPage extends PureComponent {\n  state = {\n    password: '',\n    email: '',\n    isSubmitting: false,\n    hasSubmitted: false,\n    error: '',\n    errors: {},\n  };\n\n  openORCID = (e) => {\n    e.preventDefault();\n    const clientId = process.env.ORCID_CLIENT_ID;\n\n    window.open(\n      `https://${process.env.ORCID_URL}/oauth/authorize?client_id=${process.env.ORCID_CLIENT_ID}&response_type=code&scope=/authenticate&redirect_uri=${process.env.ORCID_REDIRECT}`,\n      \"_blank\",\n      \"toolbar=no, scrollbars=yes, width=500, height=600, top=500, left=500\");\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      hasSubmitted: false,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  handleLogin = async () => {\n    const { email, password } = this.state;\n\n    this.setState({\n      isSubmitting: true,\n      error: '',\n      hasSubmitted: true,\n    });\n\n    const formData = new FormData();\n    formData.append('user[email]', email);\n    formData.append('user[password]', password);\n\n    try {\n      const loginResponse = await fetch('/users/sign_in', {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Accept': 'application/json',\n          'X-CSRF-Token': authenticityToken(),\n        }\n      });\n      const responseJson = await loginResponse.json();\n      if (responseJson.error) {\n        this.setState({\n          isSubmitting: false,\n          error: responseJson.error,\n        });\n      } else {\n        window.location.href = '/redirect_login';\n      }\n    } catch(err) {\n      this.setState({ isSubmitting: false });\n    }\n  };\n\n  submitToHubspot = async () => {\n    if (window.location.host.includes(\"halocures.com\")) {\n      const { email } = this.state;\n\n      const portalID = '6895929';\n\n      // Scientist Registration\n      let formID = '5fb3e11f-bf56-4b75-9a0b-632e5888e33f';\n\n      // https://developers.hubspot.com/docs/methods/forms/submit_form_v3\n      const url = `https://api.hsforms.com/submissions/v3/integration/submit/${portalID}/${formID}`;\n\n      try {\n        await axios.post(url, {\n          fields: [\n            { name: 'email', value: email },\n          ],\n          context: {\n            hutk: getCookie('hubspotutk'),\n          }\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }\n\n  handleRegister = async () => {\n    const { email, password } = this.state;\n\n    this.setState({\n      isSubmitting: true,\n      errors: {},\n      hasSubmitted: true,\n    });\n\n    const formData = new FormData();\n    formData.append('user[email]', email);\n    formData.append('user[password]', password);\n\n    try {\n      const createUserResponse = await fetch('/users', {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Accept': 'application/json',\n          'X-CSRF-Token': authenticityToken(),\n        }\n      });\n      const responseJson = await createUserResponse.json();\n      if (responseJson.errors) {\n        this.setState({\n          isSubmitting: false,\n          errors: responseJson.errors,\n        });\n      } else {\n        await this.submitToHubspot();\n\n        window.location.href = '/redirect_login';\n      }\n    } catch(err) {\n      this.setState({ isSubmitting: false });\n    }\n  };\n\n  render() {\n    const {\n      email,\n      password,\n      isSubmitting,\n      hasSubmitted,\n      error,\n      errors,\n    } = this.state;\n    const { isLogin, switchLink } = this.props;\n\n    const hasErrors = hasSubmitted && (error.length > 0 || Object.keys(errors).length > 0);\n    const errorKey = errors && Object.keys(errors).length > 0 && Object.keys(errors)[0];\n    const registrationError = errorKey && Object.keys(errors).length > 0 && `${errorKey}: ${errors[errorKey]}`;\n\n    return (\n      <div>\n        <div className={css(styles.SimpleAuthPage_container)}>\n          <div className={css(styles.SimpleAuthPage_backgroundPane)} />\n        </div>\n        <div className={css(styles.SimpleAuthPage_innerContainer)}>\n          <div className={css(styles.SimpleAuthPage_logoContainer)}>\n            <a href=\"/\">\n              <img src={haloLogo} />\n            </a>\n          </div>\n          <Grid centered columns={2} className={css(styles.SimpleAuthPage_grid)}>\n            <Grid.Row centered columns={2}>\n              <Grid.Column width={15}>\n                <div className={css(styles.SimpleAuthPage_hero)}>\n                  <div className={css(styles.SimpleAuthPage_headline)}>\n                    {isLogin ? \"Welcome Back!\" : \"Move Science Forward\"}\n                  </div>\n                  <div className={css(styles.SimpleAuthPage_subheadline)}>\n                    {isLogin ? \"Sign in to keep your profile current and stay up-to-date on the newest opportunities to work with industry\" : \"Join a network of scientists and partners in search of opportunities to collaborate\"}\n                  </div>\n                </div>\n                <div className={css(styles.SimpleAuthPage_innerRightPane)}>\n                  <div className={css(styles.SimpleAuthPage_signupPanel)}>\n                    <Form onSubmit={isLogin ? this.handleLogin : this.handleRegister} error={hasErrors}>\n                      <Message\n                        error\n                      >\n                        <Message.Header>{isLogin ? \"Login invalid\" : \"Registration invalid\"}</Message.Header>\n                        <p>{isLogin ? \"That doesn’t look like the right password. Give it another try or select \\\"Forgot Password\\\" below\" : \"That doesn’t look right. Give it another try. Fill in all fields and password must be at least 6 characters.\"}</p>\n                      </Message>\n                      <Form.Field className={css(styles.SimpleAuthPage_formField)}>\n                        <input\n                          className={css(styles.SimpleAuthPage_inputField)}\n                          name='email'\n                          value={email}\n                          placeholder='E-mail'\n                          onChange={this.handleChange}\n                        />\n                      </Form.Field>\n                      <Form.Field className={css(styles.SimpleAuthPage_formField)}>\n                        <input\n                          className={css(styles.SimpleAuthPage_inputField)}\n                          name='password'\n                          value={password}\n                          type=\"password\"\n                          placeholder='Password'\n                          onChange={this.handleChange}\n                        />\n                      </Form.Field>\n                      <Button\n                        disabled={isSubmitting}\n                        loading={isSubmitting}\n                        className={css(styles.SimpleAuthPage_submitButton)}\n                        type='submit'\n                      >\n                        {isLogin ? \"Sign in\" : \"Create Account\"}\n                      </Button>\n                    </Form>\n                    <div className={css(styles.SimpleAuthPage_forgotPasswordContainer)}>\n                      {!isLogin && <span className={css(styles.SimpleAuthPage_footerText)}>By signing up you agree to the </span>}\n                      {isLogin ? (\n                        <a\n                          className={css(styles.SimpleAuthPage_forgotPassword)}\n                          href=\"/users/password/new\"\n                        >\n                          Forgot password?\n                        </a>\n                      ) : (\n                        <a\n                          className={css(styles.SimpleAuthPage_forgotPassword)}\n                          href=\"/terms\"\n                          target=\"_blank\"\n                        >\n                          Terms of Service\n                        </a>\n                      )}\n                      {!isLogin && <span className={css(styles.SimpleAuthPage_footerText)}>{' & '}</span>}\n                      {!isLogin &&\n                        <a\n                          className={css(styles.SimpleAuthPage_forgotPassword)}\n                          href=\"/privacy_policy\"\n                        >\n                          Privacy Policy\n                        </a>}\n                      <hr className={css(styles.SimpleAuthPage_horizontalRule)} />\n                      <div className={css(styles.SimpleAuthPage_alreadyHaveAccount)}>\n                        {isLogin ? \"Don’t have an account?\" : \"Already have an account?\"}\n                        <span>\n                          <a className={css(styles.SimpleAuthPage_signInLink)} href={switchLink}> {isLogin ? \"Sign up\" : \"Sign in\"}</a>\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SimpleAuthPage;\n"]},"metadata":{},"sourceType":"module"}