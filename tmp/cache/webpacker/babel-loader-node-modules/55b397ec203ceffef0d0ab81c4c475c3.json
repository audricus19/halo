{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Volumes/Work/work/dev/project/projects/halo/app/javascript/src/marketplace/components/RFPPage/InviteFacultyModal.jsx\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { css, StyleSheet } from 'aphrodite';\nimport { Modal, Button, Icon } from 'semantic-ui-react';\nimport _ from 'lodash';\nimport { COLORS } from '../../../../constants';\nimport { authenticityToken } from '../../utils/requests';\nvar styles = StyleSheet.create({\n  InviteFacultyModal_modal: {\n    width: '380px',\n    fontFamily: \"Avenir\"\n  },\n  InviteFacultyModal_content: {\n    padding: '2em 1.5em'\n  },\n  InviteFacultyModal_modalTextArea: {\n    width: '100%',\n    margin: 'auto',\n    padding: '10px',\n    fontSize: '14px',\n    lineHeight: '20px'\n  },\n  InviteFacultyModal_modalInput: _defineProperty({\n    width: '100%',\n    margin: '0px auto 5px',\n    padding: '16px',\n    fontSize: '12px',\n    lineHeight: '20px',\n    borderStyle: 'solid',\n    borderWidth: '1px'\n  }, \"fontSize\", '12px'),\n  InviteFacultyModal_modalSubmitButton: {\n    background: COLORS.lightBlue,\n    backgroundImage: 'linear-gradient(134.72deg, #4E9DF5 0%, #48B2F4 100%)',\n    display: 'inline-block',\n    height: '48px',\n    textAlign: 'center',\n    color: COLORS.white,\n    fontSize: '14px',\n    fontWeight: 500,\n    lineHeight: '20px',\n    padding: '5px 50px',\n    width: '100%'\n  },\n  InviteFacultyModal_modalButtonHolder: {\n    width: '100%',\n    display: 'inline-block',\n    textAlign: 'right',\n    marginTop: '24px'\n  },\n  InviteFacultyModal_header: {\n    fontSize: '20px',\n    fontWeight: '600',\n    color: COLORS.lightBlack,\n    textAlign: 'center',\n    margin: '0 auto 14px'\n  },\n  InviteFacultyModal_subheader: {\n    color: COLORS.lightBlack,\n    fontSize: '16px',\n    margin: '0px auto 21px',\n    textAlign: 'center'\n  },\n  InviteFacultyModal_smallText: {\n    fontSize: '12px',\n    margin: '6px auto 12px'\n  },\n  InviteFacultyModal_messageToggle: {\n    paddingLeft: '9px',\n    textDecoration: 'underline',\n    cursor: 'pointer',\n    color: COLORS.blue\n  }\n});\nvar initialState = {\n  contactModalLoading: false,\n  message: '',\n  toEmails: '',\n  isExpanded: false,\n  showRFPName: false\n};\n\nvar InviteFacultyModal =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(InviteFacultyModal, _PureComponent);\n\n  function InviteFacultyModal(props) {\n    var _this;\n\n    _classCallCheck(this, InviteFacultyModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InviteFacultyModal).call(this, props));\n\n    _this.componentDidUpdate = function (prevProps) {\n      if (prevProps.open !== _this.props.open) {\n        _this.setState(initialState);\n      }\n    };\n\n    _this.handleSubmitMessage = function _callee(e) {\n      var _this$props, closeInviteFacultyModal, requestForProposal, _this$state, message, isExpanded, toEmails, formData, messageResponse, responseJson;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props = _this.props, closeInviteFacultyModal = _this$props.closeInviteFacultyModal, requestForProposal = _this$props.requestForProposal;\n              e.preventDefault();\n              _this$state = _this.state, message = _this$state.message, isExpanded = _this$state.isExpanded, toEmails = _this$state.toEmails;\n\n              _this.setState({\n                contactModalLoading: true\n              });\n\n              formData = new FormData();\n\n              if (isExpanded && message && message.length > 0) {\n                formData.append('message', message);\n              }\n\n              formData.append('request_for_proposal_id', requestForProposal.id);\n              formData.append('to_emails', toEmails);\n              _context.prev = 8;\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(fetch('/messages/request_for_proposal_contact', {\n                method: 'POST',\n                body: formData,\n                headers: {\n                  'Accept': 'application/json',\n                  'X-CSRF-Token': authenticityToken()\n                }\n              }));\n\n            case 11:\n              messageResponse = _context.sent;\n              _context.next = 14;\n              return _regeneratorRuntime.awrap(messageResponse.json());\n\n            case 14:\n              responseJson = _context.sent;\n\n              if (!responseJson.success) {\n                _this.setState({\n                  contactModalLoading: false\n                });\n              } else {\n                _this.setState({\n                  message: '',\n                  contactModalLoading: false\n                });\n\n                closeInviteFacultyModal();\n                window.location.reload();\n              }\n\n              _context.next = 21;\n              break;\n\n            case 18:\n              _context.prev = 18;\n              _context.t0 = _context[\"catch\"](8);\n\n              _this.setState({\n                contactModalLoading: false\n              });\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[8, 18]]);\n    };\n\n    _this.handleChange = function (e, attr) {\n      _this.setState(_defineProperty({}, attr, e.target.value));\n    };\n\n    _this.state = initialState;\n    return _this;\n  }\n\n  _createClass(InviteFacultyModal, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          open = _this$props2.open,\n          requestForProposal = _this$props2.requestForProposal,\n          closeInviteFacultyModal = _this$props2.closeInviteFacultyModal,\n          showRFPName = _this$props2.showRFPName;\n      var _this$state2 = this.state,\n          message = _this$state2.message,\n          toEmails = _this$state2.toEmails,\n          isExpanded = _this$state2.isExpanded,\n          contactModalLoading = _this$state2.contactModalLoading;\n      return React.createElement(Modal, {\n        open: open,\n        onClose: closeInviteFacultyModal,\n        size: \"tiny\",\n        className: \"\".concat(css(styles.InviteFacultyModal_modal), \" scrolling\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Modal.Content, {\n        className: \"\".concat(css(styles.InviteFacultyModal_content), \" scrolling\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: css(styles.InviteFacultyModal_header),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"Invite Faculty\"), React.createElement(\"div\", {\n        className: css(styles.InviteFacultyModal_subheader),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Send opportunity to faculty\"), showRFPName && React.createElement(\"div\", {\n        className: css(styles.InviteFacultyModal_subheader),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, (requestForProposal || {}).title), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: css(styles.InviteFacultyModal_modalInput),\n        placeholder: \"Enter emails separated by commas\",\n        value: toEmails,\n        onChange: function onChange(e) {\n          return _this2.handleChange(e, 'toEmails');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: css(styles.InviteFacultyModal_smallText),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, isExpanded ? \"Remove custom message\" : React.createElement(React.Fragment, null, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"(Optional)\"), React.createElement(\"a\", {\n        className: css(styles.InviteFacultyModal_messageToggle),\n        onClick: function onClick() {\n          _this2.setState({\n            isExpanded: !_this2.state.isExpanded\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, \"Add message\"))), isExpanded && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        className: css(styles.InviteFacultyModal_modalTextArea),\n        placeholder: \"Enter message here\",\n        value: message,\n        rows: 5,\n        onChange: function onChange(e) {\n          return _this2.handleChange(e, 'message');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: css(styles.InviteFacultyModal_modalButtonHolder),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: css(styles.InviteFacultyModal_modalSubmitButton),\n        type: \"submit\",\n        disabled: contactModalLoading,\n        onClick: this.handleSubmitMessage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, \"Send\"))));\n    }\n  }]);\n\n  return InviteFacultyModal;\n}(PureComponent);\n\nInviteFacultyModal.propTypes = {\n  requestForProposal: PropTypes.object,\n  open: PropTypes.bool,\n  closeInviteFacultyModal: PropTypes.func\n};\nexport default InviteFacultyModal;","map":{"version":3,"sources":["/Volumes/Work/work/dev/project/projects/halo/app/javascript/src/marketplace/components/RFPPage/InviteFacultyModal.jsx"],"names":["React","PureComponent","PropTypes","connect","css","StyleSheet","Modal","Button","Icon","_","COLORS","authenticityToken","styles","create","InviteFacultyModal_modal","width","fontFamily","InviteFacultyModal_content","padding","InviteFacultyModal_modalTextArea","margin","fontSize","lineHeight","InviteFacultyModal_modalInput","borderStyle","borderWidth","InviteFacultyModal_modalSubmitButton","background","lightBlue","backgroundImage","display","height","textAlign","color","white","fontWeight","InviteFacultyModal_modalButtonHolder","marginTop","InviteFacultyModal_header","lightBlack","InviteFacultyModal_subheader","InviteFacultyModal_smallText","InviteFacultyModal_messageToggle","paddingLeft","textDecoration","cursor","blue","initialState","contactModalLoading","message","toEmails","isExpanded","showRFPName","InviteFacultyModal","props","componentDidUpdate","prevProps","open","setState","handleSubmitMessage","e","closeInviteFacultyModal","requestForProposal","preventDefault","state","formData","FormData","length","append","id","fetch","method","body","headers","messageResponse","json","responseJson","success","window","location","reload","handleChange","attr","target","value","title","propTypes","object","bool","func"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { css, StyleSheet } from 'aphrodite';\nimport { Modal, Button, Icon } from 'semantic-ui-react';\nimport _ from 'lodash';\nimport { COLORS } from '../../../../constants';\nimport {\n  authenticityToken,\n} from '../../utils/requests';\n\nconst styles = StyleSheet.create({\n  InviteFacultyModal_modal: {\n    width: '380px',\n    fontFamily: \"Avenir\",\n  },\n  InviteFacultyModal_content: {\n    padding: '2em 1.5em'\n  },\n  InviteFacultyModal_modalTextArea: {\n    width: '100%',\n    margin: 'auto',\n    padding: '10px',\n    fontSize: '14px',\n    lineHeight: '20px',\n  },\n  InviteFacultyModal_modalInput: {\n    width: '100%',\n    margin: '0px auto 5px',\n    padding: '16px',\n    fontSize: '12px',\n    lineHeight: '20px',\n    borderStyle: 'solid',\n    borderWidth: '1px',\n    fontSize: '12px',\n  },\n  InviteFacultyModal_modalSubmitButton: {\n    background: COLORS.lightBlue,\n    backgroundImage: 'linear-gradient(134.72deg, #4E9DF5 0%, #48B2F4 100%)',\n    display: 'inline-block',\n    height: '48px',\n    textAlign: 'center',\n    color: COLORS.white,\n    fontSize: '14px',\n    fontWeight: 500,\n    lineHeight: '20px',\n    padding: '5px 50px',\n    width: '100%'\n  },\n  InviteFacultyModal_modalButtonHolder: {\n    width: '100%',\n    display: 'inline-block',\n    textAlign: 'right',\n    marginTop: '24px',\n  },\n  InviteFacultyModal_header: {\n    fontSize: '20px',\n    fontWeight: '600',\n    color: COLORS.lightBlack,\n    textAlign: 'center',\n    margin: '0 auto 14px',\n  },\n  InviteFacultyModal_subheader: {\n    color: COLORS.lightBlack,\n    fontSize: '16px',\n    margin: '0px auto 21px',\n    textAlign: 'center',\n  },\n  InviteFacultyModal_smallText: {\n    fontSize: '12px',\n    margin: '6px auto 12px',\n  },\n  InviteFacultyModal_messageToggle: {\n    paddingLeft: '9px',\n    textDecoration: 'underline',\n    cursor: 'pointer',\n    color: COLORS.blue\n  }\n});\n\nconst initialState = {\n  contactModalLoading: false,\n  message: '',\n  toEmails: '',\n  isExpanded: false,\n  showRFPName: false,\n}\n\nclass InviteFacultyModal extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = initialState;\n  }\n\n  componentDidUpdate = (prevProps) => {\n    if (prevProps.open !== this.props.open) {\n      this.setState(initialState);\n    }\n  }\n\n  handleSubmitMessage = async (e) => {\n    const {\n      closeInviteFacultyModal,\n      requestForProposal,\n    } = this.props;\n\n    e.preventDefault();\n\n    const {\n      message,\n      isExpanded,\n      toEmails,\n    } = this.state;\n\n    this.setState({\n      contactModalLoading: true,\n    });\n\n    const formData = new FormData();\n    if (isExpanded && message && message.length > 0) {\n      formData.append('message', message);\n    }\n    formData.append('request_for_proposal_id', requestForProposal.id);\n    formData.append('to_emails', toEmails);\n\n    try {\n      const messageResponse = await fetch('/messages/request_for_proposal_contact', {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Accept': 'application/json',\n          'X-CSRF-Token': authenticityToken(),\n        }\n      });\n      const responseJson = await messageResponse.json();\n      if (!responseJson.success) {\n        this.setState({\n          contactModalLoading: false,\n        });\n      } else {\n        this.setState({\n          message: '',\n          contactModalLoading: false,\n        });\n        closeInviteFacultyModal();\n        window.location.reload();\n      }\n    } catch(err) {\n      this.setState({ contactModalLoading: false });\n    }\n  }\n\n  handleChange = (e, attr) => {\n    this.setState({ [attr]: e.target.value });\n  };\n\n  render() {\n    const {\n      open,\n      requestForProposal,\n      closeInviteFacultyModal,\n      showRFPName,\n    } = this.props;\n\n    const {\n      message,\n      toEmails,\n      isExpanded,\n      contactModalLoading,\n    } = this.state;\n\n    return (\n      <Modal\n        open={open}\n        onClose={closeInviteFacultyModal}\n        size=\"tiny\"\n        className={`${css(styles.InviteFacultyModal_modal)} scrolling`}\n      >\n        <Modal.Content className={`${css(styles.InviteFacultyModal_content)} scrolling`}>\n          <div className={css(styles.InviteFacultyModal_header)}>Invite Faculty</div>\n          <div className={css(styles.InviteFacultyModal_subheader)}>Send opportunity to faculty</div>\n          {showRFPName && <div className={css(styles.InviteFacultyModal_subheader)}>{(requestForProposal || {}).title}</div>}\n          <div>\n            <input\n              type=\"text\"\n              className={css(styles.InviteFacultyModal_modalInput)}\n              placeholder='Enter emails separated by commas'\n              value={toEmails}\n              onChange={(e) => this.handleChange(e, 'toEmails')}\n            />\n          </div>\n          <div className={css(styles.InviteFacultyModal_smallText)}>\n            {isExpanded ? \"Remove custom message\" :\n              <>\n                <span>(Optional)</span>\n                <a\n                  className={css(styles.InviteFacultyModal_messageToggle)}\n                  onClick={() => {\n                    this.setState({ isExpanded: !this.state.isExpanded })\n                  }}\n                >\n                  Add message\n                </a>\n              </>\n            }\n          </div>\n          {isExpanded && (\n            <div>\n              <textarea\n                className={css(styles.InviteFacultyModal_modalTextArea)}\n                placeholder='Enter message here'\n                value={message}\n                rows={5}\n                onChange={(e) => this.handleChange(e, 'message')}\n              />\n            </div>\n          )}\n          <div className={css(styles.InviteFacultyModal_modalButtonHolder)}>\n            <Button\n              className={css(styles.InviteFacultyModal_modalSubmitButton)}\n              type='submit'\n              disabled={contactModalLoading}\n              onClick={this.handleSubmitMessage}\n            >\n              Send\n            </Button>\n          </div>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n\nInviteFacultyModal.propTypes = {\n  requestForProposal: PropTypes.object,\n  open: PropTypes.bool,\n  closeInviteFacultyModal: PropTypes.func,\n};\n\nexport default InviteFacultyModal;\n"]},"metadata":{},"sourceType":"module"}