{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Volumes/Work/work/dev/project/projects/halo/app/javascript/src/marketplace/components/Sidebar/StartupEditModal.jsx\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { css, StyleSheet } from 'aphrodite';\nimport { Modal, Button, Dropdown } from 'semantic-ui-react';\nimport moment from 'moment';\nimport _, { debounce } from 'lodash';\nimport { COLORS } from '../../../../constants';\nimport { styles as modalStyles } from '../Modal';\nimport { authenticityToken } from '../../utils/requests';\nvar styles = StyleSheet.create({\n  StartupEditModal_modal: {\n    overflow: 'visible'\n  },\n  StartupEditModal_modalHeader: {\n    fontWeight: 500,\n    fontSize: '24px',\n    lineHeight: '32px',\n    color: COLORS.lightBlack,\n    marginBottom: '32px'\n  },\n  StartupEditModal_modalFieldLabel: {\n    textAlign: 'left',\n    margin: '10px 0 6px',\n    width: '100%',\n    fontSize: '12px',\n    fontWeight: 500,\n    lineHeight: '16px',\n    color: COLORS.labelGray\n  },\n  StartupEditModal_modalTextInput: {\n    width: '100%',\n    margin: 'auto',\n    padding: '10px',\n    fontSize: '14px',\n    lineHeight: '20px',\n    borderStyle: 'solid',\n    borderWidth: '1px',\n    color: COLORS.lightBlack,\n    borderColor: COLORS.gray\n  },\n  StartupEditModal_modalSubmitButton: {\n    background: COLORS.lightBlue,\n    backgroundImage: 'linear-gradient(134.72deg, #4E9DF5 0%, #48B2F4 100%)',\n    display: 'inline-block',\n    height: '48px',\n    textAlign: 'center',\n    color: COLORS.white,\n    fontSize: '14px',\n    fontWeight: 500,\n    lineHeight: '20px',\n    padding: '5px 50px'\n  },\n  StartupEditModal_modalButtonHolder: {\n    width: '100%',\n    display: 'inline-block',\n    textAlign: 'right',\n    marginTop: '36px'\n  },\n  StartupEditModal_modalCancelButton: {\n    height: '48px',\n    textAlign: 'center',\n    color: COLORS.lightBlack,\n    backgroundColor: COLORS.white,\n    display: 'inline-block',\n    fontSize: '14px',\n    fontWeight: 500,\n    lineHeight: '20px',\n    padding: '5px 50px'\n  },\n  StartupEditModal_dropdown: {\n    width: '100%',\n    display: 'flex',\n    height: '48px',\n    alignItems: 'center',\n    borderStyle: 'solid',\n    borderWidth: '1px',\n    borderColor: COLORS.gray,\n    margin: 'auto',\n    fontSize: '14px'\n  }\n});\n\nvar yearOptions = _.range(new Date().getFullYear(), 1950, -1).map(function (year) {\n  return {\n    key: year,\n    text: year,\n    value: String(year)\n  };\n});\n\nvar StartupEditModal =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(StartupEditModal, _PureComponent);\n\n  function StartupEditModal(props) {\n    var _this;\n\n    _classCallCheck(this, StartupEditModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(StartupEditModal).call(this, props));\n\n    _this.handleSubmitMessage = function _callee(e) {\n      var closeModal, _this$state, startupName, startupUrl, startYear, endYear, isNew, startup, formData, startupResponse, responseJson;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              closeModal = _this.props.closeModal;\n              e.preventDefault();\n              _this$state = _this.state, startupName = _this$state.startupName, startupUrl = _this$state.startupUrl, startYear = _this$state.startYear, endYear = _this$state.endYear, isNew = _this$state.isNew;\n\n              _this.setState({\n                startupEditModalLoading: true\n              });\n\n              startup = _this.props.startup || {};\n              formData = new FormData();\n              formData.append('startup_name', startupName);\n\n              if (startupUrl) {\n                formData.append('url', startupUrl);\n              }\n\n              if (startYear) {\n                formData.append('start_year', startYear);\n              }\n\n              if (endYear) {\n                formData.append('end_year', endYear);\n              }\n\n              _context.prev = 10;\n              _context.next = 13;\n              return _regeneratorRuntime.awrap(fetch(isNew ? '/startups' : \"/startups/\".concat(startup.id), {\n                method: isNew ? 'POST' : 'PUT',\n                body: formData,\n                headers: {\n                  'Accept': 'application/json',\n                  'X-CSRF-Token': authenticityToken()\n                }\n              }));\n\n            case 13:\n              startupResponse = _context.sent;\n              _context.next = 16;\n              return _regeneratorRuntime.awrap(startupResponse.json());\n\n            case 16:\n              responseJson = _context.sent;\n\n              if (!responseJson.success) {\n                _this.setState({\n                  startupEditModalLoading: false\n                });\n              } else {\n                _this.setState({\n                  startupEditModalLoading: false\n                });\n\n                window.location.reload();\n              }\n\n              _context.next = 23;\n              break;\n\n            case 20:\n              _context.prev = 20;\n              _context.t0 = _context[\"catch\"](10);\n\n              _this.setState({\n                startupEditModalLoading: false\n              });\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[10, 20]]);\n    };\n\n    _this.handleChange = function (e, attr) {\n      _this.setState(_defineProperty({}, attr, e.target.value));\n    };\n\n    _this.handleYears = function (e, selection, attr) {\n      _this.setState(_defineProperty({}, attr, selection.value));\n    };\n\n    _this.handleDelete = function _callee2() {\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!confirm(\"Are you sure you want to delete that?\")) {\n                _context2.next = 4;\n                break;\n              }\n\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(fetch(\"/startups/\".concat(_this.props.startup.id), {\n                method: 'DELETE',\n                headers: {\n                  'Accept': 'application/json',\n                  'X-CSRF-Token': authenticityToken()\n                }\n              }));\n\n            case 3:\n              window.location.reload();\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      });\n    };\n\n    var _startup = props.startup || {};\n\n    _this.state = {\n      isNew: _.isEmpty(_startup),\n      startupEditModalLoading: false,\n      startupName: _startup.startup_name,\n      startupUrl: _startup.url,\n      startYear: _startup.start_year,\n      endYear: _startup.end_year\n    };\n    return _this;\n  }\n\n  _createClass(StartupEditModal, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.startup !== this.props.startup) {\n        var startup = this.props.startup || {};\n        this.setState({\n          isNew: _.isEmpty(startup),\n          startupName: startup.startup_name,\n          startupUrl: startup.url,\n          startYear: startup.start_year,\n          endYear: startup.end_year\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          open = _this$props.open,\n          startup = _this$props.startup,\n          closeModal = _this$props.closeModal;\n      var _this$state2 = this.state,\n          isNew = _this$state2.isNew,\n          startupEditModalLoading = _this$state2.startupEditModalLoading,\n          startupName = _this$state2.startupName,\n          startupUrl = _this$state2.startupUrl,\n          startYear = _this$state2.startYear,\n          endYear = _this$state2.endYear;\n      var validStartup = !!startupName;\n      return React.createElement(Modal, {\n        open: open,\n        onClose: closeModal,\n        size: \"small\",\n        closeOnDimmerClick: false,\n        className: \"\".concat(css(styles.StartupEditModal_modal), \" scrolling\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(Modal.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: css(styles.StartupEditModal_modalHeader),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"Add Startup\"), React.createElement(\"div\", {\n        className: css(styles.StartupEditModal_modalFieldLabel),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, \"Startup Name\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: css(styles.StartupEditModal_modalTextInput),\n        type: \"text\",\n        value: startupName,\n        onChange: function onChange(e) {\n          return _this2.handleChange(e, 'startupName');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: css(styles.StartupEditModal_modalFieldLabel),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \"URL\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: css(styles.StartupEditModal_modalTextInput),\n        type: \"text\",\n        value: startupUrl,\n        onChange: function onChange(e) {\n          return _this2.handleChange(e, 'startupUrl');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          width: '48%',\n          marginRight: '4%',\n          display: 'inline-block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: css(styles.StartupEditModal_modalFieldLabel),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, \"Start Year\"), React.createElement(Dropdown, {\n        className: css(styles.StartupEditModal_dropdown),\n        icon: \"chevron down\",\n        fluid: true,\n        selection: true,\n        placeholder: \"Start Year\",\n        value: startYear || '',\n        options: yearOptions,\n        onChange: function onChange(e, selection) {\n          return _this2.handleYears(e, selection, 'startYear');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          width: '48%',\n          display: 'inline-block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: css(styles.StartupEditModal_modalFieldLabel),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, \"End Year\"), React.createElement(Dropdown, {\n        className: css(styles.StartupEditModal_dropdown),\n        icon: \"chevron down\",\n        fluid: true,\n        selection: true,\n        placeholder: \"End Year\",\n        value: endYear || '',\n        options: [{\n          key: 'Present',\n          text: 'Present',\n          value: 'Present'\n        }].concat(yearOptions),\n        onChange: function onChange(e, selection) {\n          return _this2.handleYears(e, selection, 'endYear');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: css(styles.StartupEditModal_modalButtonHolder),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, !_.isEmpty(startup) && React.createElement(Button, {\n        className: css(modalStyles.Modal_deleteButton),\n        type: \"submit\",\n        onClick: this.handleDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, \"Delete\"), React.createElement(Button, {\n        className: css(styles.StartupEditModal_modalCancelButton),\n        type: \"submit\",\n        onClick: closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, \"Cancel\"), React.createElement(Button, {\n        className: css(styles.StartupEditModal_modalSubmitButton),\n        type: \"submit\",\n        disabled: !validStartup,\n        onClick: this.handleSubmitMessage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, isNew ? 'Add' : 'Save'))));\n    }\n  }]);\n\n  return StartupEditModal;\n}(PureComponent);\n\nStartupEditModal.propTypes = {\n  startup: PropTypes.object,\n  open: PropTypes.bool,\n  closeModal: PropTypes.func\n};\nexport default StartupEditModal;","map":{"version":3,"sources":["/Volumes/Work/work/dev/project/projects/halo/app/javascript/src/marketplace/components/Sidebar/StartupEditModal.jsx"],"names":["React","PureComponent","PropTypes","connect","css","StyleSheet","Modal","Button","Dropdown","moment","_","debounce","COLORS","styles","modalStyles","authenticityToken","create","StartupEditModal_modal","overflow","StartupEditModal_modalHeader","fontWeight","fontSize","lineHeight","color","lightBlack","marginBottom","StartupEditModal_modalFieldLabel","textAlign","margin","width","labelGray","StartupEditModal_modalTextInput","padding","borderStyle","borderWidth","borderColor","gray","StartupEditModal_modalSubmitButton","background","lightBlue","backgroundImage","display","height","white","StartupEditModal_modalButtonHolder","marginTop","StartupEditModal_modalCancelButton","backgroundColor","StartupEditModal_dropdown","alignItems","yearOptions","range","Date","getFullYear","map","year","key","text","value","String","StartupEditModal","props","handleSubmitMessage","e","closeModal","preventDefault","state","startupName","startupUrl","startYear","endYear","isNew","setState","startupEditModalLoading","startup","formData","FormData","append","fetch","id","method","body","headers","startupResponse","json","responseJson","success","window","location","reload","handleChange","attr","target","handleYears","selection","handleDelete","confirm","isEmpty","startup_name","url","start_year","end_year","prevProps","open","validStartup","marginRight","concat","Modal_deleteButton","propTypes","object","bool","func"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { css, StyleSheet } from 'aphrodite';\nimport { Modal, Button, Dropdown } from 'semantic-ui-react';\nimport moment from 'moment';\nimport _, { debounce } from 'lodash';\nimport { COLORS } from '../../../../constants';\nimport { styles as modalStyles } from '../Modal'\nimport {\n  authenticityToken,\n} from '../../utils/requests';\n\nconst styles = StyleSheet.create({\n  StartupEditModal_modal: {\n    overflow: 'visible',\n  },\n  StartupEditModal_modalHeader: {\n    fontWeight: 500,\n    fontSize: '24px',\n    lineHeight: '32px',\n    color: COLORS.lightBlack,\n    marginBottom: '32px',\n  },\n  StartupEditModal_modalFieldLabel: {\n    textAlign: 'left',\n    margin: '10px 0 6px',\n    width: '100%',\n    fontSize: '12px',\n    fontWeight: 500,\n    lineHeight: '16px',\n    color: COLORS.labelGray,\n  },\n  StartupEditModal_modalTextInput: {\n    width: '100%',\n    margin: 'auto',\n    padding: '10px',\n    fontSize: '14px',\n    lineHeight: '20px',\n    borderStyle: 'solid',\n    borderWidth: '1px',\n    color: COLORS.lightBlack,\n    borderColor: COLORS.gray,\n  },\n  StartupEditModal_modalSubmitButton: {\n    background: COLORS.lightBlue,\n    backgroundImage: 'linear-gradient(134.72deg, #4E9DF5 0%, #48B2F4 100%)',\n    display: 'inline-block',\n    height: '48px',\n    textAlign: 'center',\n    color: COLORS.white,\n    fontSize: '14px',\n    fontWeight: 500,\n    lineHeight: '20px',\n    padding: '5px 50px',\n  },\n  StartupEditModal_modalButtonHolder: {\n    width: '100%',\n    display: 'inline-block',\n    textAlign: 'right',\n    marginTop: '36px',\n  },\n  StartupEditModal_modalCancelButton: {\n    height: '48px',\n    textAlign: 'center',\n    color: COLORS.lightBlack,\n    backgroundColor: COLORS.white,\n    display: 'inline-block',\n    fontSize: '14px',\n    fontWeight: 500,\n    lineHeight: '20px',\n    padding: '5px 50px',\n  },\n  StartupEditModal_dropdown: {\n    width: '100%',\n    display: 'flex',\n    height: '48px',\n    alignItems: 'center',\n    borderStyle: 'solid',\n    borderWidth: '1px',\n    borderColor: COLORS.gray,\n    margin: 'auto',\n    fontSize: '14px',\n  },\n});\n\nconst yearOptions = _.range(new Date().getFullYear(), 1950, -1).map((year) => {\n  return {\n    key: year,\n    text: year,\n    value: String(year),\n  };\n});\n\nclass StartupEditModal extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    const startup = props.startup || {};\n    this.state = {\n      isNew: _.isEmpty(startup),\n      startupEditModalLoading: false,\n      startupName: startup.startup_name,\n      startupUrl: startup.url,\n      startYear: startup.start_year,\n      endYear: startup.end_year,\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.startup !== this.props.startup) {\n      const startup = this.props.startup || {};\n      this.setState({\n        isNew: _.isEmpty(startup),\n        startupName: startup.startup_name,\n        startupUrl: startup.url,\n        startYear: startup.start_year,\n        endYear: startup.end_year,\n      });\n    }\n  }\n\n  handleSubmitMessage = async (e) => {\n    const {\n      closeModal,\n    } = this.props;\n\n    e.preventDefault();\n\n    const {\n      startupName,\n      startupUrl,\n      startYear,\n      endYear,\n      isNew,\n    } = this.state;\n\n    this.setState({\n      startupEditModalLoading: true,\n    });\n\n    const startup = this.props.startup || {};\n\n    const formData = new FormData();\n    formData.append('startup_name', startupName);\n    if (startupUrl) {\n      formData.append('url', startupUrl);\n    }\n    if (startYear) {\n      formData.append('start_year', startYear);\n    }\n    if (endYear) {\n      formData.append('end_year', endYear);\n    }\n\n    try {\n      const startupResponse = await fetch(\n        isNew ? '/startups' : `/startups/${startup.id}`,\n        {\n          method: isNew ? 'POST' : 'PUT',\n          body: formData,\n          headers: {\n            'Accept': 'application/json',\n            'X-CSRF-Token': authenticityToken(),\n          }\n        }\n      );\n      const responseJson = await startupResponse.json();\n      if (!responseJson.success) {\n        this.setState({\n          startupEditModalLoading: false,\n        });\n      } else {\n        this.setState({\n          startupEditModalLoading: false,\n        });\n        window.location.reload();\n      }\n    } catch(err) {\n      this.setState({ startupEditModalLoading: false });\n    }\n  }\n\n  handleChange = (e, attr) => {\n    this.setState({ [attr]: e.target.value });\n  };\n\n  handleYears = (e, selection, attr) => {\n    this.setState({ [attr]: selection.value });\n  };\n\n  handleDelete = async () => {\n     if (confirm(\"Are you sure you want to delete that?\")) {\n      await fetch(`/startups/${this.props.startup.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json',\n          'X-CSRF-Token': authenticityToken(),\n        }\n      });\n      window.location.reload();\n    }\n  }\n\n  render() {\n    const {\n      open,\n      startup,\n      closeModal,\n    } = this.props;\n\n    const {\n      isNew,\n      startupEditModalLoading,\n      startupName,\n      startupUrl,\n      startYear,\n      endYear,\n    } = this.state;\n\n    const validStartup = !!startupName;\n    return (\n      <Modal\n        open={open}\n        onClose={closeModal}\n        size=\"small\"\n        closeOnDimmerClick={false}\n        className={`${css(styles.StartupEditModal_modal)} scrolling`}\n      >\n        <Modal.Content>\n          <div className={css(styles.StartupEditModal_modalHeader)}>\n            Add Startup\n          </div>\n          <div className={css(styles.StartupEditModal_modalFieldLabel)}>\n            Startup Name\n          </div>\n          <div>\n           <input\n              className={css(styles.StartupEditModal_modalTextInput)}\n              type='text'\n              value={startupName}\n              onChange={(e) => this.handleChange(e, 'startupName')}\n            />\n          </div>\n          <div className={css(styles.StartupEditModal_modalFieldLabel)}>\n            URL\n          </div>\n          <div>\n           <input\n              className={css(styles.StartupEditModal_modalTextInput)}\n              type='text'\n              value={startupUrl}\n              onChange={(e) => this.handleChange(e, 'startupUrl')}\n            />\n          </div>\n          <div style={{ width: '48%', marginRight: '4%', display: 'inline-block' }}>\n            <div className={css(styles.StartupEditModal_modalFieldLabel)}>\n              Start Year\n            </div>\n            <Dropdown\n              className={css(styles.StartupEditModal_dropdown)}\n              icon=\"chevron down\"\n              fluid\n              selection\n              placeholder=\"Start Year\"\n              value={startYear || ''}\n              options={yearOptions}\n              onChange={(e, selection) => this.handleYears(e, selection, 'startYear')}\n            />\n          </div>\n          <div style={{ width: '48%', display: 'inline-block' }}>\n            <div className={css(styles.StartupEditModal_modalFieldLabel)}>\n              End Year\n            </div>\n            <Dropdown\n              className={css(styles.StartupEditModal_dropdown)}\n              icon=\"chevron down\"\n              fluid\n              selection\n              placeholder=\"End Year\"\n              value={endYear || ''}\n              options={[{ key: 'Present', text: 'Present', value: 'Present'}].concat(yearOptions)}\n              onChange={(e, selection) => this.handleYears(e, selection, 'endYear')}\n            />\n          </div>\n          <div className={css(styles.StartupEditModal_modalButtonHolder)}>\n            {!_.isEmpty(startup) &&\n              <Button\n                className={css(modalStyles.Modal_deleteButton)}\n                type='submit'\n                onClick={this.handleDelete}\n                >\n                Delete\n              </Button>\n            }\n            <Button\n              className={css(styles.StartupEditModal_modalCancelButton)}\n              type='submit'\n              onClick={closeModal}\n            >\n              Cancel\n            </Button>\n            <Button\n              className={css(styles.StartupEditModal_modalSubmitButton)}\n              type='submit'\n              disabled={!validStartup}\n              onClick={this.handleSubmitMessage}\n            >\n              {isNew ? 'Add' : 'Save'}\n            </Button>\n          </div>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n\nStartupEditModal.propTypes = {\n  startup: PropTypes.object,\n  open: PropTypes.bool,\n  closeModal: PropTypes.func,\n};\n\nexport default StartupEditModal;\n"]},"metadata":{},"sourceType":"module"}