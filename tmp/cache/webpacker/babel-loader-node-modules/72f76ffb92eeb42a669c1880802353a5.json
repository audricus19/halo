{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Volumes/Work/work/dev/project/projects/halo/app/javascript/src/marketplace/components/SubmitProposal/ProposalAttachments.jsx\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { css, StyleSheet } from 'aphrodite';\nimport moment from 'moment';\nimport { Container, Grid, Tab, Menu, Button, Icon, Input } from 'semantic-ui-react';\nimport { COLORS } from '../../../../constants';\nimport { getUrlParameter } from '../../utils/requests';\nimport { toggleFundingModal as toggleFundingModalAction, togglePublicationModal as togglePublicationModalAction, togglePatentModal as togglePatentModalAction, fetchUser as fetchUserAction, fetchPublications as fetchPublicationsAction, fetchPatents as fetchPatentsAction, fetchFundings as fetchFundingsAction } from '../../actions/profileActions';\nimport NewFundingModal from '../NewFundingModal';\nimport NewPublicationModal from '../NewPublicationModal';\nimport NewPatentModal from '../NewPatentModal';\nimport ProfileList from '../ProfilePage/ProfileList';\nimport AboutEditModal from '../ProfilePage/AboutEditModal';\nvar styles = StyleSheet.create({\n  ProposalAttachments_mainPanes: {\n    marginTop: '35px',\n    textAlign: 'left'\n  },\n  ProposalAttachments_menuItem: {\n    fontSize: '14px',\n    paddingLeft: '40px',\n    paddingRight: '40px'\n  },\n  ProposalAttachments_tabMenu: {},\n  ProposalAttachments_input: {\n    width: '100%',\n    margin: 'auto',\n    padding: '10px',\n    height: '50px',\n    fontSize: '14px',\n    lineHeight: '20px',\n    borderStyle: 'solid',\n    borderColor: COLORS.gray,\n    borderRadius: '5px',\n    borderWidth: '1px'\n  },\n  ProposalAttachments_sectionHeader: {\n    color: COLORS.lightBlack,\n    fontSize: '14px',\n    fontWeight: 'bold',\n    marginTop: '80px',\n    marginBottom: '20px',\n    display: 'inline-block'\n  },\n  ProposalAttachments_aboutText: {\n    fontSize: '14px',\n    marginBottom: '60px',\n    color: COLORS.lightBlack,\n    width: '75%'\n  },\n  ProposalAttachments_addButton: {\n    fontSize: '14px',\n    padding: '10px 35px',\n    borderRadius: '4px',\n    background: COLORS.lightBlue,\n    backgroundImage: 'linear-gradient(134.72deg, #4E9DF5 0%, #48B2F4 100%)',\n    color: COLORS.white\n  },\n  ProposalAttachments_leftAlign: {\n    marginTop: '40px',\n    textAlign: 'left'\n  },\n  ProposalAttachments_rightAlign: {\n    marginTop: '30px',\n    textAlign: 'right'\n  },\n  ProposalAttachments_editButton: {\n    color: COLORS.yellow,\n    marginLeft: '10px',\n    fontSize: '14px',\n    display: 'inline-block',\n    cursor: 'pointer'\n  },\n  ProposalAttachments_inputDescriptionText: {\n    fontSize: '12px',\n    color: COLORS.lightBlack,\n    marginBottom: '-10px',\n    marginTop: '20px',\n    textAlign: 'left'\n  },\n  ProposalAttachments_scrollingSection: {\n    marginTop: '10px',\n    maxHeight: '600px',\n    overflowY: 'auto'\n  },\n  ProposalAttachments_importPublicationInput: {\n    display: 'inline-block',\n    width: '80%'\n  },\n  ProposalAttachments_importPublicationButton: {\n    fontSize: '14px',\n    borderRadius: '4px',\n    background: COLORS.lightBlue,\n    backgroundImage: 'linear-gradient(134.72deg, #4E9DF5 0%, #48B2F4 100%)',\n    color: COLORS.white,\n    width: '20%',\n    display: 'inline-block',\n    margin: '0',\n    padding: '19px 0 19px'\n  }\n});\n\nvar ProposalAttachments =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(ProposalAttachments, _PureComponent);\n\n  function ProposalAttachments(props) {\n    var _this;\n\n    _classCallCheck(this, ProposalAttachments);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProposalAttachments).call(this, props));\n\n    _this.handleTabClick = function (index) {\n      _this.setState({\n        activeTabIndex: index\n      });\n    };\n\n    _this.handleChange = function (e, attr) {\n      _this.setState(_defineProperty({}, attr, e.target.value));\n    };\n\n    _this.convertMonthName = function (month) {\n      return \"JanFebMarAprMayJunJulAugSepOctNovDec\".indexOf(month) / 3 + 1;\n    };\n\n    _this.importURL = function _callee(url) {\n      var togglePublicationModal, xmlParams, normalUrl, response, responseJson;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              togglePublicationModal = _this.props.togglePublicationModal;\n\n              _this.setState({\n                importingPublication: true\n              });\n\n              xmlParams = \"?report=xml&format=text\";\n\n              if (!url.endsWith(xmlParams)) {\n                normalUrl = url;\n                url += xmlParams;\n              } else {\n                normalUrl = url.split(xmlParams).join('');\n              }\n\n              if (!url.startsWith('http')) {\n                url = 'https://' + url;\n                normalUrl = 'https://' + normalUrl;\n              }\n\n              _context.prev = 5;\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(fetch(\"/import_pubmed?url=\".concat(encodeURI(url)), {\n                method: 'GET',\n                headers: {\n                  'Accept': 'application/json'\n                }\n              }));\n\n            case 8:\n              response = _context.sent;\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(response.json());\n\n            case 11:\n              responseJson = _context.sent;\n\n              _this.setState({\n                publicationTitle: responseJson.article_title || responseJson.book_title,\n                publicationName: responseJson.journal_title || responseJson.publisher_name,\n                publicationURL: normalUrl,\n                publicationAbstract: responseJson[\"abstract\"]\n              });\n\n              if (responseJson.pubdate_year) {\n                _this.setState({\n                  publicationYear: responseJson.pubdate_year,\n                  publicationMonth: String(_this.convertMonthName(responseJson.pubdate_month))\n                });\n              }\n\n              togglePublicationModal(true);\n              _context.next = 20;\n              break;\n\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](5);\n              console.log(_context.t0);\n\n            case 20:\n              _this.setState({\n                importingPublication: false\n              });\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[5, 17]]);\n    };\n\n    _this.getPanes = function () {\n      var _this$props = _this.props,\n          fundings = _this$props.fundings,\n          publications = _this$props.publications,\n          patents = _this$props.patents,\n          match = _this$props.match,\n          togglePublicationModal = _this$props.togglePublicationModal,\n          togglePatentModal = _this$props.togglePatentModal,\n          toggleFundingModal = _this$props.toggleFundingModal,\n          handleSelect = _this$props.handleSelect,\n          selectedPublications = _this$props.selectedPublications,\n          selectedFundings = _this$props.selectedFundings,\n          selectedPatents = _this$props.selectedPatents;\n      var _this$state = _this.state,\n          importingPublication = _this$state.importingPublication,\n          publicationURL = _this$state.publicationURL;\n      var panes = [];\n      panes.push({\n        menuItem: React.createElement(Menu.Item, {\n          className: css(styles.ProposalAttachments_menuItem),\n          onClick: function onClick() {\n            return _this.handleTabClick(0);\n          },\n          key: \"publications\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243\n          },\n          __self: this\n        }, \"Publications (\", publications.length, \")\"),\n        render: function render() {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 246\n            },\n            __self: this\n          }, publications.length > 0 && React.createElement(\"div\", {\n            className: css(styles.ProposalAttachments_inputDescriptionText),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 247\n            },\n            __self: this\n          }, \"Select a publication from your profile or add a new publication below.\"), React.createElement(\"div\", {\n            className: css(styles.ProposalAttachments_rightAlign),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 248\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: css(styles.ProposalAttachments_importPublicationInput),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 249\n            },\n            __self: this\n          }, React.createElement(Input, {\n            className: css(styles.ProposalAttachments_input),\n            transparent: true,\n            fluid: true,\n            name: \"email\",\n            icon: \"linkify\",\n            type: \"text\",\n            value: publicationURL || '',\n            placeholder: \"Paste publication link (e.g. https://www.ncbi.nlm.nih.gov/pubmed/31254486)\",\n            onChange: function onChange(e) {\n              return _this.handleChange(e, 'publicationURL');\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 250\n            },\n            __self: this\n          })), React.createElement(Button, {\n            className: css(styles.ProposalAttachments_importPublicationButton),\n            disabled: importingPublication || !publicationURL || publicationURL.length === 0,\n            onClick: function onClick() {\n              return _this.importURL(publicationURL);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 262\n            },\n            __self: this\n          }, \"Add\")), React.createElement(\"div\", {\n            className: css(styles.ProposalAttachments_scrollingSection),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 270\n            },\n            __self: this\n          }, React.createElement(ProfileList, {\n            isUser: true,\n            itemName: \"Publications\",\n            items: publications.map(function (p) {\n              return {\n                header: p.title,\n                body: p[\"abstract\"],\n                url: p.url,\n                id: p.id,\n                footerElements: [p.date ? moment(p.date).format('MMMM YYYY') : 'No Date', p.publication_name]\n              };\n            }),\n            selectGroup: \"selectedPublications\",\n            isSelectable: true,\n            onSelect: function onSelect(e, data) {\n              return handleSelect(data);\n            },\n            selected: selectedPublications,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 271\n            },\n            __self: this\n          })));\n        }\n      });\n      panes.push({\n        menuItem: React.createElement(Menu.Item, {\n          className: css(styles.ProposalAttachments_menuItem),\n          onClick: function onClick() {\n            return _this.handleTabClick(1);\n          },\n          key: \"saved\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 295\n          },\n          __self: this\n        }, \"Funding (\", fundings.length, \")\"),\n        render: function render() {\n          // Create our number formatter.\n          var formatter = new Intl.NumberFormat('en-US', {\n            style: 'currency',\n            currency: 'USD'\n          });\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 304\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: css(styles.ProposalAttachments_rightAlign),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 305\n            },\n            __self: this\n          }, React.createElement(Button, {\n            className: css(styles.ProposalAttachments_addButton),\n            onClick: function onClick() {\n              return toggleFundingModal(true);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 306\n            },\n            __self: this\n          }, \"Add Funding\")), React.createElement(\"div\", {\n            className: css(styles.ProposalAttachments_scrollingSection),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 308\n            },\n            __self: this\n          }, React.createElement(ProfileList, {\n            isUser: true,\n            itemName: \"Fundings\",\n            items: fundings.map(function (f) {\n              var header;\n\n              if (f.sponsor) {\n                if (f.sponsor_type === 'foundation') {\n                  header = \"\".concat(f.sponsor.foundation_name, \" - \").concat(f.title);\n                } else if (f.sponsor_type === 'government') {\n                  header = \"\".concat(f.sponsor.org_name, \" - \").concat(f.title);\n                } else {\n                  header = \"\".concat(f.sponsor.company_name, \" - \").concat(f.title);\n                }\n              } else {\n                header = f.title;\n              }\n\n              return {\n                header: header,\n                body: f.description,\n                url: f.url,\n                id: f.id,\n                footerElements: [f.date ? moment(f.date).format('MMMM YYYY') : 'No Date', \"\".concat(formatter.format(Number(f.amount)).split('.')[0]), (f.sponsor || {}).company_name]\n              };\n            }),\n            selectGroup: \"selectedFundings\",\n            isSelectable: true,\n            onSelect: function onSelect(e, data) {\n              return handleSelect(data);\n            },\n            selected: selectedFundings,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 309\n            },\n            __self: this\n          })));\n        }\n      });\n      panes.push({\n        menuItem: React.createElement(Menu.Item, {\n          className: css(styles.ProposalAttachments_menuItem),\n          onClick: function onClick() {\n            return _this.handleTabClick(2);\n          },\n          key: \"partners\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 345\n          },\n          __self: this\n        }, \"Patents (\", patents.length, \")\"),\n        render: function render() {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 348\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: css(styles.ProposalAttachments_rightAlign),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 349\n            },\n            __self: this\n          }, React.createElement(Button, {\n            className: css(styles.ProposalAttachments_addButton),\n            onClick: function onClick() {\n              return togglePatentModal({\n                open: true\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 350\n            },\n            __self: this\n          }, \"Add Patent\")), React.createElement(\"div\", {\n            className: css(styles.ProposalAttachments_scrollingSection),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 352\n            },\n            __self: this\n          }, React.createElement(ProfileList, {\n            isUser: true,\n            itemName: \"Patents\",\n            items: patents.map(function (p) {\n              var patentStatus = gon.patent_statuses.find(function (ps) {\n                return ps.key === p.status;\n              });\n              var statusText = 'Status: ' + (patentStatus ? patentStatus.text : 'None');\n              var patentFilingDate = p.filing_date ? 'Filing Date: ' + moment.utc(p.filing_date).format('MMMM DD, YYYY') : 'No Date';\n              return {\n                header: p.title,\n                body: p[\"abstract\"],\n                url: p.url,\n                id: p.id,\n                footerElements: [patentFilingDate, null, statusText]\n              };\n            }),\n            selectGroup: \"selectedPatents\",\n            isSelectable: true,\n            onSelect: function onSelect(e, data) {\n              return handleSelect(data);\n            },\n            selected: selectedPatents,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 353\n            },\n            __self: this\n          })));\n        }\n      });\n      return panes;\n    };\n\n    _this.state = {\n      activeTabIndex: 0,\n      aboutEdit: false,\n      aboutEditModalOpen: false,\n      importingPublication: false,\n      publicationTitle: undefined,\n      publicationName: undefined,\n      publicationURL: undefined,\n      publicationAbstract: undefined,\n      publicationYear: undefined,\n      publicationMonth: undefined\n    };\n    return _this;\n  }\n\n  _createClass(ProposalAttachments, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props2, currentUser, fetchUser, fetchPublications, fetchPatents, fetchFundings, match, currentUserId;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$props2 = this.props, currentUser = _this$props2.currentUser, fetchUser = _this$props2.fetchUser, fetchPublications = _this$props2.fetchPublications, fetchPatents = _this$props2.fetchPatents, fetchFundings = _this$props2.fetchFundings, match = _this$props2.match;\n              currentUserId = currentUser.id || (gon.current_user || {}).id;\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(fetchUser(currentUserId));\n\n            case 4:\n              _context2.next = 6;\n              return _regeneratorRuntime.awrap(fetchPublications(currentUserId));\n\n            case 6:\n              _context2.next = 8;\n              return _regeneratorRuntime.awrap(fetchPatents(currentUserId));\n\n            case 8:\n              _context2.next = 10;\n              return _regeneratorRuntime.awrap(fetchFundings(currentUserId));\n\n            case 10:\n              window.scrollTo(0, 0);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          currentUser = _this$props3.currentUser,\n          match = _this$props3.match,\n          handleSelect = _this$props3.handleSelect;\n      var _this$state2 = this.state,\n          activeTabIndex = _this$state2.activeTabIndex,\n          aboutEdit = _this$state2.aboutEdit,\n          aboutEditModalOpen = _this$state2.aboutEditModalOpen,\n          publicationTitle = _this$state2.publicationTitle,\n          publicationName = _this$state2.publicationName,\n          publicationURL = _this$state2.publicationURL,\n          publicationAbstract = _this$state2.publicationAbstract,\n          publicationYear = _this$state2.publicationYear,\n          publicationMonth = _this$state2.publicationMonth;\n      var currentUserId = currentUser.id;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403\n        },\n        __self: this\n      }, React.createElement(AboutEditModal, {\n        open: aboutEditModalOpen,\n        closeModal: function closeModal() {\n          return _this2.setState({\n            aboutEditModalOpen: false\n          });\n        },\n        userId: currentUser.id,\n        text: currentUser && currentUser.profile_info ? currentUser.profile_info.about : undefined,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404\n        },\n        __self: this\n      }), React.createElement(NewFundingModal, {\n        title: \"Add Funding\",\n        currentUserId: currentUser.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410\n        },\n        __self: this\n      }), React.createElement(NewPublicationModal, {\n        title: \"Confirm Publication\",\n        currentUserId: currentUser.id,\n        publicationTitle: publicationTitle,\n        publicationName: publicationName,\n        publicationURL: publicationURL,\n        publicationAbstract: publicationAbstract,\n        publicationMonth: publicationMonth,\n        publicationYear: publicationYear,\n        clearUrl: function clearUrl() {\n          _this2.setState({\n            publicationURL: ''\n          });\n        },\n        afterAddAction: function afterAddAction(publicationId) {\n          handleSelect({\n            name: 'selectedPublications',\n            value: Number(publicationId)\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }), React.createElement(NewPatentModal, {\n        currentUserId: currentUser.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: css(styles.ProposalAttachments_mainPanes),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429\n        },\n        __self: this\n      }, React.createElement(Grid.Column, {\n        width: 16,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }, React.createElement(Tab, {\n        className: css(styles.ProposalAttachments_tabMenu),\n        activeIndex: activeTabIndex,\n        menu: {\n          secondary: true,\n          pointing: true\n        },\n        panes: this.getPanes(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return ProposalAttachments;\n}(PureComponent);\n\nProposalAttachments.defaultProps = {\n  fundings: [],\n  publications: [],\n  patents: [],\n  currentUser: {}\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    currentUser: state.profiles.currentUser,\n    fundings: state.profiles.fundings,\n    publications: state.profiles.publications,\n    patents: state.profiles.patents\n  };\n};\n\nvar mapDispatchToProps = {\n  toggleFundingModal: toggleFundingModalAction,\n  togglePublicationModal: togglePublicationModalAction,\n  togglePatentModal: togglePatentModalAction,\n  fetchUser: fetchUserAction,\n  fetchPublications: fetchPublicationsAction,\n  fetchPatents: fetchPatentsAction,\n  fetchFundings: fetchFundingsAction\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ProposalAttachments);","map":{"version":3,"sources":["/Volumes/Work/work/dev/project/projects/halo/app/javascript/src/marketplace/components/SubmitProposal/ProposalAttachments.jsx"],"names":["React","PureComponent","PropTypes","connect","css","StyleSheet","moment","Container","Grid","Tab","Menu","Button","Icon","Input","COLORS","getUrlParameter","toggleFundingModal","toggleFundingModalAction","togglePublicationModal","togglePublicationModalAction","togglePatentModal","togglePatentModalAction","fetchUser","fetchUserAction","fetchPublications","fetchPublicationsAction","fetchPatents","fetchPatentsAction","fetchFundings","fetchFundingsAction","NewFundingModal","NewPublicationModal","NewPatentModal","ProfileList","AboutEditModal","styles","create","ProposalAttachments_mainPanes","marginTop","textAlign","ProposalAttachments_menuItem","fontSize","paddingLeft","paddingRight","ProposalAttachments_tabMenu","ProposalAttachments_input","width","margin","padding","height","lineHeight","borderStyle","borderColor","gray","borderRadius","borderWidth","ProposalAttachments_sectionHeader","color","lightBlack","fontWeight","marginBottom","display","ProposalAttachments_aboutText","ProposalAttachments_addButton","background","lightBlue","backgroundImage","white","ProposalAttachments_leftAlign","ProposalAttachments_rightAlign","ProposalAttachments_editButton","yellow","marginLeft","cursor","ProposalAttachments_inputDescriptionText","ProposalAttachments_scrollingSection","maxHeight","overflowY","ProposalAttachments_importPublicationInput","ProposalAttachments_importPublicationButton","ProposalAttachments","props","handleTabClick","index","setState","activeTabIndex","handleChange","e","attr","target","value","convertMonthName","month","indexOf","importURL","url","importingPublication","xmlParams","endsWith","normalUrl","split","join","startsWith","fetch","encodeURI","method","headers","response","json","responseJson","publicationTitle","article_title","book_title","publicationName","journal_title","publisher_name","publicationURL","publicationAbstract","pubdate_year","publicationYear","publicationMonth","String","pubdate_month","console","log","getPanes","fundings","publications","patents","match","handleSelect","selectedPublications","selectedFundings","selectedPatents","state","panes","push","menuItem","length","render","map","p","header","title","body","id","footerElements","date","format","publication_name","data","formatter","Intl","NumberFormat","style","currency","f","sponsor","sponsor_type","foundation_name","org_name","company_name","description","Number","amount","open","patentStatus","gon","patent_statuses","find","ps","key","status","statusText","text","patentFilingDate","filing_date","utc","aboutEdit","aboutEditModalOpen","undefined","currentUser","currentUserId","current_user","window","scrollTo","profile_info","about","publicationId","name","secondary","pointing","defaultProps","mapStateToProps","profiles","mapDispatchToProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,GAAT,EAAcC,UAAd,QAAgC,WAAhC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,SAAT,EAAoBC,IAApB,EAA0BC,GAA1B,EAA+BC,IAA/B,EAAqCC,MAArC,EAA6CC,IAA7C,EAAmDC,KAAnD,QAAgE,mBAAhE;AAEA,SAASC,MAAT,QAAuB,uBAAvB;AACA,SAASC,eAAT,QAAgC,sBAAhC;AACA,SACEC,kBAAkB,IAAIC,wBADxB,EAEEC,sBAAsB,IAAIC,4BAF5B,EAGEC,iBAAiB,IAAIC,uBAHvB,EAIEC,SAAS,IAAIC,eAJf,EAKEC,iBAAiB,IAAIC,uBALvB,EAMEC,YAAY,IAAIC,kBANlB,EAOEC,aAAa,IAAIC,mBAPnB,QAQO,8BARP;AASA,OAAOC,eAAP,MAA4B,oBAA5B;AACA,OAAOC,mBAAP,MAAgC,wBAAhC;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AAEA,IAAMC,MAAM,GAAG9B,UAAU,CAAC+B,MAAX,CAAkB;AAC/BC,EAAAA,6BAA6B,EAAE;AAC7BC,IAAAA,SAAS,EAAE,MADkB;AAE7BC,IAAAA,SAAS,EAAE;AAFkB,GADA;AAK/BC,EAAAA,4BAA4B,EAAE;AAC5BC,IAAAA,QAAQ,EAAE,MADkB;AAE5BC,IAAAA,WAAW,EAAE,MAFe;AAG5BC,IAAAA,YAAY,EAAE;AAHc,GALC;AAU/BC,EAAAA,2BAA2B,EAAE,EAVE;AAa/BC,EAAAA,yBAAyB,EAAE;AACzBC,IAAAA,KAAK,EAAE,MADkB;AAEzBC,IAAAA,MAAM,EAAE,MAFiB;AAGzBC,IAAAA,OAAO,EAAE,MAHgB;AAIzBC,IAAAA,MAAM,EAAE,MAJiB;AAKzBR,IAAAA,QAAQ,EAAE,MALe;AAMzBS,IAAAA,UAAU,EAAE,MANa;AAOzBC,IAAAA,WAAW,EAAE,OAPY;AAQzBC,IAAAA,WAAW,EAAEtC,MAAM,CAACuC,IARK;AASzBC,IAAAA,YAAY,EAAE,KATW;AAUzBC,IAAAA,WAAW,EAAE;AAVY,GAbI;AAyB/BC,EAAAA,iCAAiC,EAAE;AACjCC,IAAAA,KAAK,EAAE3C,MAAM,CAAC4C,UADmB;AAEjCjB,IAAAA,QAAQ,EAAE,MAFuB;AAGjCkB,IAAAA,UAAU,EAAE,MAHqB;AAIjCrB,IAAAA,SAAS,EAAE,MAJsB;AAKjCsB,IAAAA,YAAY,EAAE,MALmB;AAMjCC,IAAAA,OAAO,EAAE;AANwB,GAzBJ;AAiC/BC,EAAAA,6BAA6B,EAAE;AAC7BrB,IAAAA,QAAQ,EAAE,MADmB;AAE7BmB,IAAAA,YAAY,EAAE,MAFe;AAG7BH,IAAAA,KAAK,EAAE3C,MAAM,CAAC4C,UAHe;AAI7BZ,IAAAA,KAAK,EAAE;AAJsB,GAjCA;AAuC/BiB,EAAAA,6BAA6B,EAAE;AAC7BtB,IAAAA,QAAQ,EAAE,MADmB;AAE7BO,IAAAA,OAAO,EAAE,WAFoB;AAG7BM,IAAAA,YAAY,EAAE,KAHe;AAI7BU,IAAAA,UAAU,EAAElD,MAAM,CAACmD,SAJU;AAK7BC,IAAAA,eAAe,EAAE,sDALY;AAM7BT,IAAAA,KAAK,EAAE3C,MAAM,CAACqD;AANe,GAvCA;AA+C/BC,EAAAA,6BAA6B,EAAE;AAC7B9B,IAAAA,SAAS,EAAE,MADkB;AAE7BC,IAAAA,SAAS,EAAE;AAFkB,GA/CA;AAmD/B8B,EAAAA,8BAA8B,EAAE;AAC9B/B,IAAAA,SAAS,EAAE,MADmB;AAE9BC,IAAAA,SAAS,EAAE;AAFmB,GAnDD;AAuD/B+B,EAAAA,8BAA8B,EAAE;AAC9Bb,IAAAA,KAAK,EAAE3C,MAAM,CAACyD,MADgB;AAE9BC,IAAAA,UAAU,EAAE,MAFkB;AAG9B/B,IAAAA,QAAQ,EAAE,MAHoB;AAI9BoB,IAAAA,OAAO,EAAE,cAJqB;AAK9BY,IAAAA,MAAM,EAAE;AALsB,GAvDD;AA8D/BC,EAAAA,wCAAwC,EAAE;AACxCjC,IAAAA,QAAQ,EAAE,MAD8B;AAExCgB,IAAAA,KAAK,EAAE3C,MAAM,CAAC4C,UAF0B;AAGxCE,IAAAA,YAAY,EAAE,OAH0B;AAIxCtB,IAAAA,SAAS,EAAE,MAJ6B;AAKxCC,IAAAA,SAAS,EAAE;AAL6B,GA9DX;AAqE/BoC,EAAAA,oCAAoC,EAAE;AACpCrC,IAAAA,SAAS,EAAE,MADyB;AAEpCsC,IAAAA,SAAS,EAAE,OAFyB;AAGpCC,IAAAA,SAAS,EAAE;AAHyB,GArEP;AA0E/BC,EAAAA,0CAA0C,EAAE;AAC1CjB,IAAAA,OAAO,EAAE,cADiC;AAE1Cf,IAAAA,KAAK,EAAE;AAFmC,GA1Eb;AA8E/BiC,EAAAA,2CAA2C,EAAE;AAC3CtC,IAAAA,QAAQ,EAAE,MADiC;AAE3Ca,IAAAA,YAAY,EAAE,KAF6B;AAG3CU,IAAAA,UAAU,EAAElD,MAAM,CAACmD,SAHwB;AAI3CC,IAAAA,eAAe,EAAE,sDAJ0B;AAK3CT,IAAAA,KAAK,EAAE3C,MAAM,CAACqD,KAL6B;AAM3CrB,IAAAA,KAAK,EAAE,KANoC;AAO3Ce,IAAAA,OAAO,EAAE,cAPkC;AAQ3Cd,IAAAA,MAAM,EAAE,GARmC;AAS3CC,IAAAA,OAAO,EAAE;AATkC;AA9Ed,CAAlB,CAAf;;IA2FMgC,mB;;;;;AACJ,+BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,6FAAMA,KAAN;;AADiB,UAoCnBC,cApCmB,GAoCF,UAACC,KAAD,EAAW;AAC1B,YAAKC,QAAL,CAAc;AAAEC,QAAAA,cAAc,EAAEF;AAAlB,OAAd;AACD,KAtCkB;;AAAA,UAwCnBG,YAxCmB,GAwCJ,UAACC,CAAD,EAAIC,IAAJ,EAAa;AAC1B,YAAKJ,QAAL,qBAAiBI,IAAjB,EAAwBD,CAAC,CAACE,MAAF,CAASC,KAAjC;AACD,KA1CkB;;AAAA,UA4CnBC,gBA5CmB,GA4CA,UAACC,KAAD,EAAW;AAC5B,aAAO,uCAAuCC,OAAvC,CAA+CD,KAA/C,IAAwD,CAAxD,GAA4D,CAAnE;AACD,KA9CkB;;AAAA,UAgDnBE,SAhDmB,GAgDP,iBAAOC,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAER7E,cAAAA,sBAFQ,GAGN,MAAK+D,KAHC,CAER/D,sBAFQ;;AAKV,oBAAKkE,QAAL,CAAc;AACZY,gBAAAA,oBAAoB,EAAE;AADV,eAAd;;AAIMC,cAAAA,SATI,GASQ,yBATR;;AAYV,kBAAI,CAACF,GAAG,CAACG,QAAJ,CAAaD,SAAb,CAAL,EAA8B;AAC5BE,gBAAAA,SAAS,GAAGJ,GAAZ;AACAA,gBAAAA,GAAG,IAAIE,SAAP;AACD,eAHD,MAGO;AACLE,gBAAAA,SAAS,GAAGJ,GAAG,CAACK,KAAJ,CAAUH,SAAV,EAAqBI,IAArB,CAA0B,EAA1B,CAAZ;AACD;;AAED,kBAAI,CAACN,GAAG,CAACO,UAAJ,CAAe,MAAf,CAAL,EAA6B;AAC3BP,gBAAAA,GAAG,GAAG,aAAaA,GAAnB;AACAI,gBAAAA,SAAS,GAAG,aAAaA,SAAzB;AACD;;AAtBS;AAAA;AAAA,+CAyBeI,KAAK,8BAAuBC,SAAS,CAACT,GAAD,CAAhC,GAAyC;AACnEU,gBAAAA,MAAM,EAAE,KAD2D;AAEnEC,gBAAAA,OAAO,EAAE;AACP,4BAAU;AADH;AAF0D,eAAzC,CAzBpB;;AAAA;AAyBFC,cAAAA,QAzBE;AAAA;AAAA,+CA+BmBA,QAAQ,CAACC,IAAT,EA/BnB;;AAAA;AA+BFC,cAAAA,YA/BE;;AAiCR,oBAAKzB,QAAL,CAAc;AACZ0B,gBAAAA,gBAAgB,EAAED,YAAY,CAACE,aAAb,IAA8BF,YAAY,CAACG,UADjD;AAEZC,gBAAAA,eAAe,EAAEJ,YAAY,CAACK,aAAb,IAA8BL,YAAY,CAACM,cAFhD;AAGZC,gBAAAA,cAAc,EAAEjB,SAHJ;AAIZkB,gBAAAA,mBAAmB,EAAER,YAAY;AAJrB,eAAd;;AAOA,kBAAIA,YAAY,CAACS,YAAjB,EAA+B;AAC7B,sBAAKlC,QAAL,CAAc;AACZmC,kBAAAA,eAAe,EAAEV,YAAY,CAACS,YADlB;AAEZE,kBAAAA,gBAAgB,EAAEC,MAAM,CAAC,MAAK9B,gBAAL,CAAsBkB,YAAY,CAACa,aAAnC,CAAD;AAFZ,iBAAd;AAID;;AAEDxG,cAAAA,sBAAsB,CAAC,IAAD,CAAtB;AA/CQ;AAAA;;AAAA;AAAA;AAAA;AAiDRyG,cAAAA,OAAO,CAACC,GAAR;;AAjDQ;AAoDV,oBAAKxC,QAAL,CAAc;AACZY,gBAAAA,oBAAoB,EAAE;AADV,eAAd;;AApDU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAhDO;;AAAA,UAyGnB6B,QAzGmB,GAyGR,YAAM;AAAA,wBAaX,MAAK5C,KAbM;AAAA,UAEb6C,QAFa,eAEbA,QAFa;AAAA,UAGbC,YAHa,eAGbA,YAHa;AAAA,UAIbC,OAJa,eAIbA,OAJa;AAAA,UAKbC,KALa,eAKbA,KALa;AAAA,UAMb/G,sBANa,eAMbA,sBANa;AAAA,UAObE,iBAPa,eAObA,iBAPa;AAAA,UAQbJ,kBARa,eAQbA,kBARa;AAAA,UASbkH,YATa,eASbA,YATa;AAAA,UAUbC,oBAVa,eAUbA,oBAVa;AAAA,UAWbC,gBAXa,eAWbA,gBAXa;AAAA,UAYbC,eAZa,eAYbA,eAZa;AAAA,wBAiBX,MAAKC,KAjBM;AAAA,UAebtC,oBAfa,eAebA,oBAfa;AAAA,UAgBboB,cAhBa,eAgBbA,cAhBa;AAmBf,UAAMmB,KAAK,GAAG,EAAd;AACAA,MAAAA,KAAK,CAACC,IAAN,CAAW;AACTC,QAAAA,QAAQ,EAAE,oBAAC,IAAD,CAAM,IAAN;AAAW,UAAA,SAAS,EAAErI,GAAG,CAAC+B,MAAM,CAACK,4BAAR,CAAzB;AAAgE,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAK0C,cAAL,CAAoB,CAApB,CAAN;AAAA,WAAzE;AAAuG,UAAA,GAAG,EAAC,cAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAyI6C,YAAY,CAACW,MAAtJ,MADD;AAETC,QAAAA,MAAM,EAAE,kBAAM;AACZ,iBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACGZ,YAAY,CAACW,MAAb,GAAsB,CAAtB,IAA2B;AAAK,YAAA,SAAS,EAAEtI,GAAG,CAAC+B,MAAM,CAACuC,wCAAR,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sFAD9B,EAEE;AAAK,YAAA,SAAS,EAAEtE,GAAG,CAAC+B,MAAM,CAACkC,8BAAR,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAK,YAAA,SAAS,EAAEjE,GAAG,CAAC+B,MAAM,CAAC2C,0CAAR,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,oBAAC,KAAD;AACE,YAAA,SAAS,EAAE1E,GAAG,CAAC+B,MAAM,CAACU,yBAAR,CADhB;AAEE,YAAA,WAAW,MAFb;AAGE,YAAA,KAAK,MAHP;AAIE,YAAA,IAAI,EAAC,OAJP;AAKE,YAAA,IAAI,EAAC,SALP;AAME,YAAA,IAAI,EAAC,MANP;AAOE,YAAA,KAAK,EAAEuE,cAAc,IAAI,EAP3B;AAQE,YAAA,WAAW,EAAC,4EARd;AASE,YAAA,QAAQ,EAAE,kBAAC7B,CAAD;AAAA,qBAAO,MAAKD,YAAL,CAAkBC,CAAlB,EAAqB,gBAArB,CAAP;AAAA,aATZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADF,EAcE,oBAAC,MAAD;AACE,YAAA,SAAS,EAAEnF,GAAG,CAAC+B,MAAM,CAAC4C,2CAAR,CADhB;AAEE,YAAA,QAAQ,EAAEiB,oBAAoB,IAAI,CAACoB,cAAzB,IAA2CA,cAAc,CAACsB,MAAf,KAA0B,CAFjF;AAGE,YAAA,OAAO,EAAE;AAAA,qBAAM,MAAK5C,SAAL,CAAesB,cAAf,CAAN;AAAA,aAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAdF,CAFF,EAwBE;AAAK,YAAA,SAAS,EAAEhH,GAAG,CAAC+B,MAAM,CAACwC,oCAAR,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,oBAAC,WAAD;AACE,YAAA,MAAM,MADR;AAEE,YAAA,QAAQ,EAAC,cAFX;AAGE,YAAA,KAAK,EAAEoD,YAAY,CAACa,GAAb,CAAiB,UAACC,CAAD,EAAO;AAC7B,qBAAO;AACLC,gBAAAA,MAAM,EAAED,CAAC,CAACE,KADL;AAELC,gBAAAA,IAAI,EAAEH,CAAC,YAFF;AAGL9C,gBAAAA,GAAG,EAAE8C,CAAC,CAAC9C,GAHF;AAILkD,gBAAAA,EAAE,EAAEJ,CAAC,CAACI,EAJD;AAKLC,gBAAAA,cAAc,EAAE,CAACL,CAAC,CAACM,IAAF,GAAS7I,MAAM,CAACuI,CAAC,CAACM,IAAH,CAAN,CAAeC,MAAf,CAAsB,WAAtB,CAAT,GAA8C,SAA/C,EAA0DP,CAAC,CAACQ,gBAA5D;AALX,eAAP;AAOD,aARM,CAHT;AAYE,YAAA,WAAW,EAAE,sBAZf;AAaE,YAAA,YAAY,MAbd;AAcE,YAAA,QAAQ,EAAE,kBAAC9D,CAAD,EAAI+D,IAAJ;AAAA,qBAAapB,YAAY,CAACoB,IAAD,CAAzB;AAAA,aAdZ;AAeE,YAAA,QAAQ,EAAEnB,oBAfZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CAxBF,CADF;AA8CD;AAjDQ,OAAX;AAoDAI,MAAAA,KAAK,CAACC,IAAN,CAAW;AACTC,QAAAA,QAAQ,EAAE,oBAAC,IAAD,CAAM,IAAN;AAAW,UAAA,SAAS,EAAErI,GAAG,CAAC+B,MAAM,CAACK,4BAAR,CAAzB;AAAgE,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAK0C,cAAL,CAAoB,CAApB,CAAN;AAAA,WAAzE;AAAuG,UAAA,GAAG,EAAC,OAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA6H4C,QAAQ,CAACY,MAAtI,MADD;AAETC,QAAAA,MAAM,EAAE,kBAAM;AACZ;AACA,cAAMY,SAAS,GAAG,IAAIC,IAAI,CAACC,YAAT,CAAsB,OAAtB,EAA+B;AAC/CC,YAAAA,KAAK,EAAE,UADwC;AAE/CC,YAAAA,QAAQ,EAAE;AAFqC,WAA/B,CAAlB;AAKA,iBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAK,YAAA,SAAS,EAAEvJ,GAAG,CAAC+B,MAAM,CAACkC,8BAAR,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,oBAAC,MAAD;AAAQ,YAAA,SAAS,EAAEjE,GAAG,CAAC+B,MAAM,CAAC4B,6BAAR,CAAtB;AAA8D,YAAA,OAAO,EAAE;AAAA,qBAAM/C,kBAAkB,CAAC,IAAD,CAAxB;AAAA,aAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,CADF,EAIE;AAAK,YAAA,SAAS,EAAEZ,GAAG,CAAC+B,MAAM,CAACwC,oCAAR,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,oBAAC,WAAD;AACE,YAAA,MAAM,MADR;AAEE,YAAA,QAAQ,EAAC,UAFX;AAGE,YAAA,KAAK,EAAEmD,QAAQ,CAACc,GAAT,CAAa,UAACgB,CAAD,EAAO;AACzB,kBAAId,MAAJ;;AACA,kBAAIc,CAAC,CAACC,OAAN,EAAe;AACb,oBAAID,CAAC,CAACE,YAAF,KAAmB,YAAvB,EAAqC;AACnChB,kBAAAA,MAAM,aAAMc,CAAC,CAACC,OAAF,CAAUE,eAAhB,gBAAqCH,CAAC,CAACb,KAAvC,CAAN;AACD,iBAFD,MAEO,IAAIa,CAAC,CAACE,YAAF,KAAmB,YAAvB,EAAqC;AAC1ChB,kBAAAA,MAAM,aAAMc,CAAC,CAACC,OAAF,CAAUG,QAAhB,gBAA8BJ,CAAC,CAACb,KAAhC,CAAN;AACD,iBAFM,MAEA;AACLD,kBAAAA,MAAM,aAAMc,CAAC,CAACC,OAAF,CAAUI,YAAhB,gBAAkCL,CAAC,CAACb,KAApC,CAAN;AACD;AACF,eARD,MAQO;AACLD,gBAAAA,MAAM,GAAGc,CAAC,CAACb,KAAX;AACD;;AACD,qBAAO;AACLD,gBAAAA,MAAM,EAANA,MADK;AAELE,gBAAAA,IAAI,EAAEY,CAAC,CAACM,WAFH;AAGLnE,gBAAAA,GAAG,EAAE6D,CAAC,CAAC7D,GAHF;AAILkD,gBAAAA,EAAE,EAAEW,CAAC,CAACX,EAJD;AAKLC,gBAAAA,cAAc,EAAE,CAACU,CAAC,CAACT,IAAF,GAAS7I,MAAM,CAACsJ,CAAC,CAACT,IAAH,CAAN,CAAeC,MAAf,CAAsB,WAAtB,CAAT,GAA8C,SAA/C,YAA6DG,SAAS,CAACH,MAAV,CAAiBe,MAAM,CAACP,CAAC,CAACQ,MAAH,CAAvB,EAAmChE,KAAnC,CAAyC,GAAzC,EAA8C,CAA9C,CAA7D,GAAiH,CAACwD,CAAC,CAACC,OAAF,IAAa,EAAd,EAAkBI,YAAnI;AALX,eAAP;AAOD,aApBM,CAHT;AAwBE,YAAA,WAAW,EAAE,kBAxBf;AAyBE,YAAA,YAAY,MAzBd;AA0BE,YAAA,QAAQ,EAAE,kBAAC1E,CAAD,EAAI+D,IAAJ;AAAA,qBAAapB,YAAY,CAACoB,IAAD,CAAzB;AAAA,aA1BZ;AA2BE,YAAA,QAAQ,EAAElB,gBA3BZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CAJF,CADF;AAsCD;AA/CQ,OAAX;AAkDAG,MAAAA,KAAK,CAACC,IAAN,CAAW;AACTC,QAAAA,QAAQ,EAAE,oBAAC,IAAD,CAAM,IAAN;AAAW,UAAA,SAAS,EAAErI,GAAG,CAAC+B,MAAM,CAACK,4BAAR,CAAzB;AAAgE,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAK0C,cAAL,CAAoB,CAApB,CAAN;AAAA,WAAzE;AAAuG,UAAA,GAAG,EAAC,UAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAgI8C,OAAO,CAACU,MAAxI,MADD;AAETC,QAAAA,MAAM,EAAE,kBAAM;AACZ,iBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAK,YAAA,SAAS,EAAEvI,GAAG,CAAC+B,MAAM,CAACkC,8BAAR,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,oBAAC,MAAD;AAAQ,YAAA,SAAS,EAAEjE,GAAG,CAAC+B,MAAM,CAAC4B,6BAAR,CAAtB;AAA8D,YAAA,OAAO,EAAE;AAAA,qBAAM3C,iBAAiB,CAAC;AAAEiJ,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAAvB;AAAA,aAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,CADF,EAIE;AAAK,YAAA,SAAS,EAAEjK,GAAG,CAAC+B,MAAM,CAACwC,oCAAR,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,oBAAC,WAAD;AACE,YAAA,MAAM,MADR;AAEE,YAAA,QAAQ,EAAC,SAFX;AAGE,YAAA,KAAK,EAAEqD,OAAO,CAACY,GAAR,CAAY,UAACC,CAAD,EAAO;AACxB,kBAAMyB,YAAY,GAAGC,GAAG,CAACC,eAAJ,CAAoBC,IAApB,CAAyB,UAAAC,EAAE;AAAA,uBAAIA,EAAE,CAACC,GAAH,KAAW9B,CAAC,CAAC+B,MAAjB;AAAA,eAA3B,CAArB;AACA,kBAAMC,UAAU,GAAG,cAAcP,YAAY,GAAGA,YAAY,CAACQ,IAAhB,GAAuB,MAAjD,CAAnB;AACA,kBAAMC,gBAAgB,GAAIlC,CAAC,CAACmC,WAAF,GAAgB,kBAAkB1K,MAAM,CAAC2K,GAAP,CAAWpC,CAAC,CAACmC,WAAb,EAA0B5B,MAA1B,CAAiC,eAAjC,CAAlC,GAAsF,SAAhH;AACA,qBAAO;AACLN,gBAAAA,MAAM,EAAED,CAAC,CAACE,KADL;AAELC,gBAAAA,IAAI,EAAEH,CAAC,YAFF;AAGL9C,gBAAAA,GAAG,EAAE8C,CAAC,CAAC9C,GAHF;AAILkD,gBAAAA,EAAE,EAAEJ,CAAC,CAACI,EAJD;AAKLC,gBAAAA,cAAc,EAAE,CAAC6B,gBAAD,EAAmB,IAAnB,EAAyBF,UAAzB;AALX,eAAP;AAOD,aAXM,CAHT;AAeE,YAAA,WAAW,EAAE,iBAff;AAgBE,YAAA,YAAY,MAhBd;AAiBE,YAAA,QAAQ,EAAE,kBAACtF,CAAD,EAAI+D,IAAJ;AAAA,qBAAapB,YAAY,CAACoB,IAAD,CAAzB;AAAA,aAjBZ;AAkBE,YAAA,QAAQ,EAAEjB,eAlBZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CAJF,CADF;AA6BD;AAhCQ,OAAX;AAmCA,aAAOE,KAAP;AACD,KAvQkB;;AAEjB,UAAKD,KAAL,GAAa;AACXjD,MAAAA,cAAc,EAAE,CADL;AAEX6F,MAAAA,SAAS,EAAE,KAFA;AAGXC,MAAAA,kBAAkB,EAAE,KAHT;AAIXnF,MAAAA,oBAAoB,EAAE,KAJX;AAKXc,MAAAA,gBAAgB,EAAEsE,SALP;AAMXnE,MAAAA,eAAe,EAAEmE,SANN;AAOXhE,MAAAA,cAAc,EAAEgE,SAPL;AAQX/D,MAAAA,mBAAmB,EAAE+D,SARV;AASX7D,MAAAA,eAAe,EAAE6D,SATN;AAUX5D,MAAAA,gBAAgB,EAAE4D;AAVP,KAAb;AAFiB;AAclB;;;;;;;;;;;6BAUK,KAAKnG,K,EANPoG,W,gBAAAA,W,EACA/J,S,gBAAAA,S,EACAE,iB,gBAAAA,iB,EACAE,Y,gBAAAA,Y,EACAE,a,gBAAAA,a,EACAqG,K,gBAAAA,K;AAGIqD,cAAAA,a,GAAgBD,WAAW,CAACpC,EAAZ,IAAkB,CAACsB,GAAG,CAACgB,YAAJ,IAAoB,EAArB,EAAyBtC,E;;+CAE3D3H,SAAS,CAACgK,aAAD,C;;;;+CACT9J,iBAAiB,CAAC8J,aAAD,C;;;;+CACjB5J,YAAY,CAAC4J,aAAD,C;;;;+CACZ1J,aAAa,CAAC0J,aAAD,C;;;AAEnBE,cAAAA,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;;;;;;;;;;;6BAwOO;AAAA;;AAAA,yBAKH,KAAKxG,KALF;AAAA,UAELoG,WAFK,gBAELA,WAFK;AAAA,UAGLpD,KAHK,gBAGLA,KAHK;AAAA,UAILC,YAJK,gBAILA,YAJK;AAAA,yBAgBH,KAAKI,KAhBF;AAAA,UAOLjD,cAPK,gBAOLA,cAPK;AAAA,UAQL6F,SARK,gBAQLA,SARK;AAAA,UASLC,kBATK,gBASLA,kBATK;AAAA,UAULrE,gBAVK,gBAULA,gBAVK;AAAA,UAWLG,eAXK,gBAWLA,eAXK;AAAA,UAYLG,cAZK,gBAYLA,cAZK;AAAA,UAaLC,mBAbK,gBAaLA,mBAbK;AAAA,UAcLE,eAdK,gBAcLA,eAdK;AAAA,UAeLC,gBAfK,gBAeLA,gBAfK;AAkBP,UAAM8D,aAAa,GAAGD,WAAW,CAACpC,EAAlC;AAEA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,cAAD;AACE,QAAA,IAAI,EAAEkC,kBADR;AAEE,QAAA,UAAU,EAAE;AAAA,iBAAM,MAAI,CAAC/F,QAAL,CAAc;AAAE+F,YAAAA,kBAAkB,EAAE;AAAtB,WAAd,CAAN;AAAA,SAFd;AAGE,QAAA,MAAM,EAAEE,WAAW,CAACpC,EAHtB;AAIE,QAAA,IAAI,EAAEoC,WAAW,IAAIA,WAAW,CAACK,YAA3B,GAA0CL,WAAW,CAACK,YAAZ,CAAyBC,KAAnE,GAA2EP,SAJnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAOE,oBAAC,eAAD;AAAiB,QAAA,KAAK,EAAC,aAAvB;AAAqC,QAAA,aAAa,EAAEC,WAAW,CAACpC,EAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,EAQE,oBAAC,mBAAD;AACE,QAAA,KAAK,EAAC,qBADR;AAEE,QAAA,aAAa,EAAEoC,WAAW,CAACpC,EAF7B;AAGE,QAAA,gBAAgB,EAAEnC,gBAHpB;AAIE,QAAA,eAAe,EAAEG,eAJnB;AAKE,QAAA,cAAc,EAAEG,cALlB;AAME,QAAA,mBAAmB,EAAEC,mBANvB;AAOE,QAAA,gBAAgB,EAAEG,gBAPpB;AAQE,QAAA,eAAe,EAAED,eARnB;AASE,QAAA,QAAQ,EAAE,oBAAM;AACd,UAAA,MAAI,CAACnC,QAAL,CAAc;AAAEgC,YAAAA,cAAc,EAAE;AAAlB,WAAd;AACD,SAXH;AAYE,QAAA,cAAc,EAAE,wBAACwE,aAAD,EAAmB;AACjC1D,UAAAA,YAAY,CAAC;AAAE2D,YAAAA,IAAI,EAAE,sBAAR;AAAgCnG,YAAAA,KAAK,EAAEyE,MAAM,CAACyB,aAAD;AAA7C,WAAD,CAAZ;AACD,SAdH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,EAwBE,oBAAC,cAAD;AAAgB,QAAA,aAAa,EAAEP,WAAW,CAACpC,EAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAxBF,EAyBE;AAAK,QAAA,SAAS,EAAE7I,GAAG,CAAC+B,MAAM,CAACE,6BAAR,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD,CAAM,MAAN;AAAa,QAAA,KAAK,EAAE,EAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,SAAS,EAAEjC,GAAG,CAAC+B,MAAM,CAACS,2BAAR,CAAnB;AAAyD,QAAA,WAAW,EAAEyC,cAAtE;AAAsF,QAAA,IAAI,EAAE;AAAEyG,UAAAA,SAAS,EAAE,IAAb;AAAmBC,UAAAA,QAAQ,EAAE;AAA7B,SAA5F;AAAiI,QAAA,KAAK,EAAE,KAAKlE,QAAL,EAAxI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CADF,CAzBF,CADF;AAmCD;;;;EAjU+B5H,a;;AAoUlC+E,mBAAmB,CAACgH,YAApB,GAAmC;AACjClE,EAAAA,QAAQ,EAAE,EADuB;AAEjCC,EAAAA,YAAY,EAAE,EAFmB;AAGjCC,EAAAA,OAAO,EAAE,EAHwB;AAIjCqD,EAAAA,WAAW,EAAE;AAJoB,CAAnC;;AAOA,IAAMY,eAAe,GAAG,SAAlBA,eAAkB,CAAC3D,KAAD,EAAW;AACjC,SAAO;AACL+C,IAAAA,WAAW,EAAE/C,KAAK,CAAC4D,QAAN,CAAeb,WADvB;AAELvD,IAAAA,QAAQ,EAAEQ,KAAK,CAAC4D,QAAN,CAAepE,QAFpB;AAGLC,IAAAA,YAAY,EAAEO,KAAK,CAAC4D,QAAN,CAAenE,YAHxB;AAILC,IAAAA,OAAO,EAAEM,KAAK,CAAC4D,QAAN,CAAelE;AAJnB,GAAP;AAMD,CAPD;;AASA,IAAMmE,kBAAkB,GAAG;AACzBnL,EAAAA,kBAAkB,EAAEC,wBADK;AAEzBC,EAAAA,sBAAsB,EAAEC,4BAFC;AAGzBC,EAAAA,iBAAiB,EAAEC,uBAHM;AAIzBC,EAAAA,SAAS,EAAEC,eAJc;AAKzBC,EAAAA,iBAAiB,EAAEC,uBALM;AAMzBC,EAAAA,YAAY,EAAEC,kBANW;AAOzBC,EAAAA,aAAa,EAAEC;AAPU,CAA3B;AAUA,eAAe1B,OAAO,CACpB8L,eADoB,EAEpBE,kBAFoB,CAAP,CAGbnH,mBAHa,CAAf","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { css, StyleSheet } from 'aphrodite';\nimport moment from 'moment';\nimport { Container, Grid, Tab, Menu, Button, Icon, Input } from 'semantic-ui-react';\n\nimport { COLORS } from '../../../../constants';\nimport { getUrlParameter } from '../../utils/requests';\nimport {\n  toggleFundingModal as toggleFundingModalAction,\n  togglePublicationModal as togglePublicationModalAction,\n  togglePatentModal as togglePatentModalAction,\n  fetchUser as fetchUserAction,\n  fetchPublications as fetchPublicationsAction,\n  fetchPatents as fetchPatentsAction,\n  fetchFundings as fetchFundingsAction,\n} from '../../actions/profileActions';\nimport NewFundingModal from '../NewFundingModal';\nimport NewPublicationModal from '../NewPublicationModal';\nimport NewPatentModal from '../NewPatentModal';\nimport ProfileList from '../ProfilePage/ProfileList';\nimport AboutEditModal from '../ProfilePage/AboutEditModal';\n\nconst styles = StyleSheet.create({\n  ProposalAttachments_mainPanes: {\n    marginTop: '35px',\n    textAlign: 'left',\n  },\n  ProposalAttachments_menuItem: {\n    fontSize: '14px',\n    paddingLeft: '40px',\n    paddingRight: '40px',\n  },\n  ProposalAttachments_tabMenu: {\n\n  },\n  ProposalAttachments_input: {\n    width: '100%',\n    margin: 'auto',\n    padding: '10px',\n    height: '50px',\n    fontSize: '14px',\n    lineHeight: '20px',\n    borderStyle: 'solid',\n    borderColor: COLORS.gray,\n    borderRadius: '5px',\n    borderWidth: '1px',\n  },\n  ProposalAttachments_sectionHeader: {\n    color: COLORS.lightBlack,\n    fontSize: '14px',\n    fontWeight: 'bold',\n    marginTop: '80px',\n    marginBottom: '20px',\n    display: 'inline-block',\n  },\n  ProposalAttachments_aboutText: {\n    fontSize: '14px',\n    marginBottom: '60px',\n    color: COLORS.lightBlack,\n    width: '75%',\n  },\n  ProposalAttachments_addButton: {\n    fontSize: '14px',\n    padding: '10px 35px',\n    borderRadius: '4px',\n    background: COLORS.lightBlue,\n    backgroundImage: 'linear-gradient(134.72deg, #4E9DF5 0%, #48B2F4 100%)',\n    color: COLORS.white,\n  },\n  ProposalAttachments_leftAlign: {\n    marginTop: '40px',\n    textAlign: 'left',\n  },\n  ProposalAttachments_rightAlign: {\n    marginTop: '30px',\n    textAlign: 'right',\n  },\n  ProposalAttachments_editButton: {\n    color: COLORS.yellow,\n    marginLeft: '10px',\n    fontSize: '14px',\n    display: 'inline-block',\n    cursor: 'pointer',\n  },\n  ProposalAttachments_inputDescriptionText: {\n    fontSize: '12px',\n    color: COLORS.lightBlack,\n    marginBottom: '-10px',\n    marginTop: '20px',\n    textAlign: 'left',\n  },\n  ProposalAttachments_scrollingSection: {\n    marginTop: '10px',\n    maxHeight: '600px',\n    overflowY: 'auto',\n  },\n  ProposalAttachments_importPublicationInput: {\n    display: 'inline-block',\n    width: '80%',\n  },\n  ProposalAttachments_importPublicationButton: {\n    fontSize: '14px',\n    borderRadius: '4px',\n    background: COLORS.lightBlue,\n    backgroundImage: 'linear-gradient(134.72deg, #4E9DF5 0%, #48B2F4 100%)',\n    color: COLORS.white,\n    width: '20%',\n    display: 'inline-block',\n    margin: '0',\n    padding: '19px 0 19px',\n  },\n});\n\nclass ProposalAttachments extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTabIndex: 0,\n      aboutEdit: false,\n      aboutEditModalOpen: false,\n      importingPublication: false,\n      publicationTitle: undefined,\n      publicationName: undefined,\n      publicationURL: undefined,\n      publicationAbstract: undefined,\n      publicationYear: undefined,\n      publicationMonth: undefined,\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      currentUser,\n      fetchUser,\n      fetchPublications,\n      fetchPatents,\n      fetchFundings,\n      match,\n    } = this.props;\n\n    const currentUserId = currentUser.id || (gon.current_user || {}).id;\n\n    await fetchUser(currentUserId);\n    await fetchPublications(currentUserId);\n    await fetchPatents(currentUserId);\n    await fetchFundings(currentUserId);\n\n    window.scrollTo(0, 0);\n  }\n\n  handleTabClick = (index) => {\n    this.setState({ activeTabIndex: index });\n  }\n\n  handleChange = (e, attr) => {\n    this.setState({ [attr]: e.target.value });\n  };\n\n  convertMonthName = (month) => {\n    return \"JanFebMarAprMayJunJulAugSepOctNovDec\".indexOf(month) / 3 + 1;\n  }\n\n  importURL = async (url) => {\n    const {\n      togglePublicationModal\n    } = this.props;\n\n    this.setState({\n      importingPublication: true,\n    });\n\n    const xmlParams = \"?report=xml&format=text\";\n\n    let normalUrl;\n    if (!url.endsWith(xmlParams)) {\n      normalUrl = url;\n      url += xmlParams;\n    } else {\n      normalUrl = url.split(xmlParams).join('');\n    }\n\n    if (!url.startsWith('http')) {\n      url = 'https://' + url;\n      normalUrl = 'https://' + normalUrl;\n    }\n\n    try {\n      const response = await fetch(`/import_pubmed?url=${encodeURI(url)}`, {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json',\n        }\n      });\n      const responseJson = await response.json();\n\n      this.setState({\n        publicationTitle: responseJson.article_title || responseJson.book_title,\n        publicationName: responseJson.journal_title || responseJson.publisher_name,\n        publicationURL: normalUrl,\n        publicationAbstract: responseJson.abstract,\n      });\n\n      if (responseJson.pubdate_year) {\n        this.setState({\n          publicationYear: responseJson.pubdate_year,\n          publicationMonth: String(this.convertMonthName(responseJson.pubdate_month)),\n        });\n      }\n\n      togglePublicationModal(true)\n    } catch (err) {\n      console.log(err);\n    }\n\n    this.setState({\n      importingPublication: false,\n    });\n  }\n\n  getPanes = () => {\n    const {\n      fundings,\n      publications,\n      patents,\n      match,\n      togglePublicationModal,\n      togglePatentModal,\n      toggleFundingModal,\n      handleSelect,\n      selectedPublications,\n      selectedFundings,\n      selectedPatents,\n    } = this.props;\n    const {\n      importingPublication,\n      publicationURL,\n    } = this.state;\n\n    const panes = [];\n    panes.push({\n      menuItem: <Menu.Item className={css(styles.ProposalAttachments_menuItem)} onClick={() => this.handleTabClick(0)} key=\"publications\">Publications ({publications.length})</Menu.Item>,\n      render: () => {\n        return (\n          <div>\n            {publications.length > 0 && <div className={css(styles.ProposalAttachments_inputDescriptionText)}>Select a publication from your profile or add a new publication below.</div>}\n            <div className={css(styles.ProposalAttachments_rightAlign)}>\n              <div className={css(styles.ProposalAttachments_importPublicationInput)}>\n                <Input\n                  className={css(styles.ProposalAttachments_input)}\n                  transparent\n                  fluid\n                  name='email'\n                  icon=\"linkify\"\n                  type=\"text\"\n                  value={publicationURL || ''}\n                  placeholder='Paste publication link (e.g. https://www.ncbi.nlm.nih.gov/pubmed/31254486)'\n                  onChange={(e) => this.handleChange(e, 'publicationURL')}\n                />\n              </div>\n              <Button\n                className={css(styles.ProposalAttachments_importPublicationButton)}\n                disabled={importingPublication || !publicationURL || publicationURL.length === 0}\n                onClick={() => this.importURL(publicationURL)}\n              >\n                Add\n              </Button>\n            </div>\n            <div className={css(styles.ProposalAttachments_scrollingSection)}>\n              <ProfileList\n                isUser\n                itemName='Publications'\n                items={publications.map((p) => {\n                  return {\n                    header: p.title,\n                    body: p.abstract,\n                    url: p.url,\n                    id: p.id,\n                    footerElements: [p.date ? moment(p.date).format('MMMM YYYY') : 'No Date', p.publication_name],\n                  };\n                })}\n                selectGroup={\"selectedPublications\"}\n                isSelectable\n                onSelect={(e, data) => handleSelect(data)}\n                selected={selectedPublications}\n              />\n            </div>\n          </div>\n        );\n      },\n    });\n\n    panes.push({\n      menuItem: <Menu.Item className={css(styles.ProposalAttachments_menuItem)} onClick={() => this.handleTabClick(1)} key=\"saved\">Funding ({fundings.length})</Menu.Item>,\n      render: () => {\n        // Create our number formatter.\n        const formatter = new Intl.NumberFormat('en-US', {\n          style: 'currency',\n          currency: 'USD',\n        });\n\n        return (\n          <div>\n            <div className={css(styles.ProposalAttachments_rightAlign)}>\n              <Button className={css(styles.ProposalAttachments_addButton)} onClick={() => toggleFundingModal(true)}>Add Funding</Button>\n            </div>\n            <div className={css(styles.ProposalAttachments_scrollingSection)}>\n              <ProfileList\n                isUser\n                itemName='Fundings'\n                items={fundings.map((f) => {\n                  let header;\n                  if (f.sponsor) {\n                    if (f.sponsor_type === 'foundation') {\n                      header = `${f.sponsor.foundation_name} - ${f.title}`;\n                    } else if (f.sponsor_type === 'government') {\n                      header = `${f.sponsor.org_name} - ${f.title}`;\n                    } else {\n                      header = `${f.sponsor.company_name} - ${f.title}`;\n                    }\n                  } else {\n                    header = f.title;\n                  }\n                  return {\n                    header,\n                    body: f.description,\n                    url: f.url,\n                    id: f.id,\n                    footerElements: [f.date ? moment(f.date).format('MMMM YYYY') : 'No Date', `${formatter.format(Number(f.amount)).split('.')[0]}`, (f.sponsor || {}).company_name],\n                  };\n                })}\n                selectGroup={\"selectedFundings\"}\n                isSelectable\n                onSelect={(e, data) => handleSelect(data)}\n                selected={selectedFundings}\n              />\n            </div>\n          </div>\n        );\n      }\n    });\n\n    panes.push({\n      menuItem: <Menu.Item className={css(styles.ProposalAttachments_menuItem)} onClick={() => this.handleTabClick(2)} key=\"partners\">Patents ({patents.length})</Menu.Item>,\n      render: () => {\n        return (\n          <div>\n            <div className={css(styles.ProposalAttachments_rightAlign)}>\n              <Button className={css(styles.ProposalAttachments_addButton)} onClick={() => togglePatentModal({ open: true })}>Add Patent</Button>\n            </div>\n            <div className={css(styles.ProposalAttachments_scrollingSection)}>\n              <ProfileList\n                isUser\n                itemName='Patents'\n                items={patents.map((p) => {\n                  const patentStatus = gon.patent_statuses.find(ps => ps.key === p.status);\n                  const statusText = 'Status: ' + (patentStatus ? patentStatus.text : 'None');\n                  const patentFilingDate = (p.filing_date ? 'Filing Date: ' + moment.utc(p.filing_date).format('MMMM DD, YYYY') : 'No Date');\n                  return {\n                    header: p.title,\n                    body: p.abstract,\n                    url: p.url,\n                    id: p.id,\n                    footerElements: [patentFilingDate, null, statusText]\n                  };\n                })}\n                selectGroup={\"selectedPatents\"}\n                isSelectable\n                onSelect={(e, data) => handleSelect(data)}\n                selected={selectedPatents}\n              />\n            </div>\n          </div>\n        );\n      }\n    });\n\n    return panes;\n  };\n\n  render() {\n    const {\n      currentUser,\n      match,\n      handleSelect,\n    } = this.props;\n    const {\n      activeTabIndex,\n      aboutEdit,\n      aboutEditModalOpen,\n      publicationTitle,\n      publicationName,\n      publicationURL,\n      publicationAbstract,\n      publicationYear,\n      publicationMonth,\n    } = this.state;\n\n    const currentUserId = currentUser.id;\n\n    return (\n      <div>\n        <AboutEditModal\n          open={aboutEditModalOpen}\n          closeModal={() => this.setState({ aboutEditModalOpen: false })}\n          userId={currentUser.id}\n          text={currentUser && currentUser.profile_info ? currentUser.profile_info.about : undefined}\n        />\n        <NewFundingModal title=\"Add Funding\" currentUserId={currentUser.id} />\n        <NewPublicationModal\n          title=\"Confirm Publication\"\n          currentUserId={currentUser.id}\n          publicationTitle={publicationTitle}\n          publicationName={publicationName}\n          publicationURL={publicationURL}\n          publicationAbstract={publicationAbstract}\n          publicationMonth={publicationMonth}\n          publicationYear={publicationYear}\n          clearUrl={() => {\n            this.setState({ publicationURL: '' })\n          }}\n          afterAddAction={(publicationId) => {\n            handleSelect({ name: 'selectedPublications', value: Number(publicationId) });\n          }}\n        />\n        <NewPatentModal currentUserId={currentUser.id} />\n        <div className={css(styles.ProposalAttachments_mainPanes)}>\n          <Grid>\n            <Grid.Column width={16}>\n              <Tab className={css(styles.ProposalAttachments_tabMenu)} activeIndex={activeTabIndex} menu={{ secondary: true, pointing: true }} panes={this.getPanes()} />\n            </Grid.Column>\n          </Grid>\n        </div>\n      </div>\n    );\n  }\n}\n\nProposalAttachments.defaultProps = {\n  fundings: [],\n  publications: [],\n  patents: [],\n  currentUser: {},\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    currentUser: state.profiles.currentUser,\n    fundings: state.profiles.fundings,\n    publications: state.profiles.publications,\n    patents: state.profiles.patents,\n  };\n};\n\nconst mapDispatchToProps = {\n  toggleFundingModal: toggleFundingModalAction,\n  togglePublicationModal: togglePublicationModalAction,\n  togglePatentModal: togglePatentModalAction,\n  fetchUser: fetchUserAction,\n  fetchPublications: fetchPublicationsAction,\n  fetchPatents: fetchPatentsAction,\n  fetchFundings: fetchFundingsAction,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ProposalAttachments);\n"]},"metadata":{},"sourceType":"module"}